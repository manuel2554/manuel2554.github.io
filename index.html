<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BRUTALUX | Cat√°logo + Compatibilidad + Facturaci√≥n</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <style>
    :root{
      --bg:#06070b;
      --card:#0d1018;
      --card2:#0b0d14;
      --muted:#9aa3b2;
      --text:#e9edf5;
      --line:rgba(255,255,255,.08);
      --blue:#00c8ff;
      --orange:#ff5c00;
      --green:#22c55e;
      --yellow:#fbbf24;
      --purple:#a855f7;
      --shadow:0 18px 60px rgba(0,0,0,.55);
      --r:18px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background: radial-gradient(1200px 600px at 20% 10%, rgba(0,200,255,.10), transparent 60%),
                  radial-gradient(900px 500px at 80% 20%, rgba(255,92,0,.10), transparent 60%),
                  var(--bg);
      color:var(--text);
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      overflow-x:hidden;
    }

    a{color:inherit}
    .container{max-width:1200px;margin:0 auto;padding:0 18px}
    .orbitron{font-family:Orbitron, Inter, system-ui}

    /* Header */
    header{
      position:sticky;top:0;z-index:50;
      backdrop-filter: blur(10px);
      background:rgba(6,7,11,.72);
      border-bottom:1px solid var(--line);
    }
    .nav{
      display:flex;align-items:center;justify-content:space-between;
      padding:12px 0; gap:14px;
    }
    .brand{
      display:flex;align-items:center;gap:12px;min-width:220px;
    }
    .brand img{
      height:44px;width:auto;display:block;border-radius:10px;
      box-shadow:0 0 0 1px rgba(255,255,255,.08) inset;
    }
    .brand .tag{
      font-size:11px;color:var(--muted);
      letter-spacing:.18em;text-transform:uppercase;margin-top:2px;
    }
    .brand .name{
      font-weight:800;letter-spacing:.06em;
      color:linear-gradient(90deg,var(--blue),var(--orange));
    }

    .links{display:flex;gap:14px;align-items:center;flex-wrap:wrap;justify-content:flex-end}
    .links a{
      text-decoration:none;
      font-size:13px;font-weight:600;
      color:rgba(233,237,245,.9);
      padding:8px 10px;border-radius:12px;
      border:1px solid transparent;
    }
    .links a:hover{border-color:var(--line);background:rgba(255,255,255,.04)}
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      padding:10px 12px;border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      font-weight:700;font-size:12px;
      white-space:nowrap;
    }
    .pill b{color:var(--yellow)}
    .cta-wa{
      text-decoration:none;
      display:inline-flex;align-items:center;gap:10px;
      padding:10px 14px;border-radius:999px;
      background:linear-gradient(90deg,#22c55e,#16a34a);
      color:#05130a;font-weight:900;
      box-shadow:0 12px 30px rgba(34,197,94,.25);
      border:1px solid rgba(255,255,255,.12);
      white-space:nowrap;
    }
    .cta-wa:hover{filter:brightness(1.05)}

    /* Hero */
    .hero{
      position:relative;
      padding:54px 0 28px;
      overflow:hidden;
    }
    .heroCard{
      position:relative;
      border:1px solid var(--line);
      background:
        linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.80)),
        url("https://images.unsplash.com/photo-1525609004556-c46c7d6cf023?auto=format&fit=crop&w=2200&q=80") center/cover no-repeat;
      border-radius:28px;
      box-shadow:var(--shadow);
      padding:54px 22px;
    }
    .heroGrid{display:grid;grid-template-columns:1.1fr .9fr;gap:18px;align-items:center}
    .hero h1{
      margin:0 0 10px;
      font-size:clamp(28px,4vw,46px);
      letter-spacing:.06em;
      text-transform:uppercase;
      text-shadow:0 0 30px rgba(255,92,0,.30);
    }
    .hero h1 .grad{
      background:linear-gradient(90deg,var(--blue),var(--orange));
      -webkit-background-clip:text;background-clip:text;color:transparent;
    }
    .hero p{margin:0 0 18px;color:rgba(233,237,245,.86);max-width:60ch}
    .heroBtns{display:flex;gap:10px;flex-wrap:wrap}
    .btn{
      border:1px solid var(--line);
      background:rgba(255,255,255,.05);
      color:var(--text);
      padding:12px 16px;border-radius:14px;
      font-weight:800;text-decoration:none;
      display:inline-flex;align-items:center;gap:10px;
    }
    .btn:hover{background:rgba(255,255,255,.08)}
    .btnPrimary{
      background:linear-gradient(90deg,var(--orange),#ff8a00);
      color:#1a0a00;border-color:rgba(255,255,255,.18);
      box-shadow:0 16px 45px rgba(255,92,0,.22);
    }
    .btnPrimary:hover{filter:brightness(1.05)}
    .heroStats{
      border:1px solid var(--line);
      background:rgba(0,0,0,.35);
      border-radius:22px;
      padding:18px;
    }
    .statGrid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .stat{
      padding:12px;border-radius:16px;
      background:rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.06);
    }
    .stat .k{font-weight:900;font-size:18px}
    .stat .s{color:var(--muted);font-size:12px;margin-top:4px}
    .badges{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
    .badge{
      font-size:12px;font-weight:900;
      border-radius:999px;padding:8px 10px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.05);
    }
    .bBlue{box-shadow:0 0 0 1px rgba(0,200,255,.22) inset}
    .bOrange{box-shadow:0 0 0 1px rgba(255,92,0,.22) inset}
    .bGreen{box-shadow:0 0 0 1px rgba(34,197,94,.22) inset}

    /* Section title */
    section{padding:26px 0}
    .sectionTitle{
      display:flex;align-items:flex-end;justify-content:space-between;gap:12px;
      margin:0 0 14px;
    }
    .sectionTitle h2{
      margin:0;
      font-size:20px;
      letter-spacing:.06em;
      text-transform:uppercase;
    }
    .sectionTitle p{margin:0;color:var(--muted);font-size:13px}

    /* Feature strip */
    .features{
      display:grid;
      grid-template-columns:repeat(4,1fr);
      gap:12px;
    }
    .feature{
      background:rgba(255,255,255,.03);
      border:1px solid var(--line);
      border-radius:18px;
      padding:14px;
      display:flex;gap:12px;align-items:flex-start;
    }
    .feature i{
      width:38px;height:38px;border-radius:14px;
      display:grid;place-items:center;
      background:rgba(0,200,255,.12);
      border:1px solid rgba(0,200,255,.18);
      color:var(--blue);
      flex:0 0 auto;
    }
    .feature .t{font-weight:900}
    .feature .d{color:var(--muted);font-size:12px;margin-top:3px}

    /* Catalog cards */
    .cards{display:grid;grid-template-columns:repeat(4,1fr);gap:14px}
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.015));
      border:1px solid var(--line);
      border-radius:22px;
      overflow:hidden;
      box-shadow:0 10px 30px rgba(0,0,0,.25);
      display:flex;flex-direction:column;
      min-height:100%;
    }
    .card .img{
      height:200px;background:#000;position:relative;overflow:hidden;
    }
    .card .img img{width:100%;height:100%;object-fit:cover;transform:scale(1.02);transition:.5s}
    .card:hover .img img{transform:scale(1.08)}
    .tagTop{
      position:absolute;left:12px;top:12px;
      font-size:12px;font-weight:900;
      padding:8px 12px;border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(0,0,0,.45);
      backdrop-filter: blur(8px);
      display:inline-flex;align-items:center;gap:8px;
    }
    .tGold{box-shadow:0 0 0 1px rgba(251,191,36,.25) inset}
    .tPurple{box-shadow:0 0 0 1px rgba(168,85,247,.25) inset}
    .tBlue{box-shadow:0 0 0 1px rgba(0,200,255,.25) inset}
    .tGray{box-shadow:0 0 0 1px rgba(148,163,184,.18) inset}

    .card .body{padding:14px 14px 12px;display:flex;flex-direction:column;gap:10px;flex:1}
    .card .model{color:rgba(255,255,255,.65);font-size:12px;letter-spacing:.14em;text-transform:uppercase}
    .card .name{margin:0;font-size:18px;letter-spacing:.04em}
    .spec{display:grid;gap:6px;margin:2px 0 0;padding:0;list-style:none}
    .spec li{font-size:12px;color:var(--muted);display:flex;gap:8px;align-items:flex-start}
    .spec i{color:var(--blue);margin-top:2px}
    .priceRow{
      margin-top:auto;
      padding-top:10px;border-top:1px solid var(--line);
      display:flex;align-items:baseline;justify-content:space-between;gap:10px;flex-wrap:wrap;
    }
    .usd{font-weight:900;font-size:20px}
    .bs{font-size:12px;color:rgba(233,237,245,.65)}
    .card .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .btnSmall{
      flex:1;
      display:inline-flex;align-items:center;justify-content:center;gap:10px;
      padding:10px 12px;border-radius:14px;
      text-decoration:none;
      border:1px solid var(--line);
      background:rgba(255,255,255,.04);
      font-weight:900;font-size:12px;
    }
    .btnSmall:hover{background:rgba(255,255,255,.07)}
    .btnGreen{background:rgba(34,197,94,.15);border-color:rgba(34,197,94,.25)}
    .btnGreen:hover{background:rgba(34,197,94,.22)}
    .btnOrange{background:rgba(255,92,0,.15);border-color:rgba(255,92,0,.25)}
    .btnOrange:hover{background:rgba(255,92,0,.22)}

    /* Compatibility */
    .compatBox{
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(0,0,0,.35));
      border-radius:22px;
      padding:16px;
      box-shadow:0 12px 40px rgba(0,0,0,.22);
    }
    .formGrid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;align-items:end}
    label{display:block;font-size:12px;color:rgba(233,237,245,.72);margin:0 0 6px}
    select,input{
      width:100%;
      padding:12px 12px;border-radius:14px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.35);
      color:var(--text);
      outline:none;
    }
    select:focus,input:focus{border-color:rgba(0,200,255,.35);box-shadow:0 0 0 4px rgba(0,200,255,.12)}
    .result{
      margin-top:12px;
      border:1px dashed rgba(255,255,255,.12);
      border-radius:18px;
      padding:12px;
      color:rgba(233,237,245,.86);
      background:rgba(255,255,255,.02);
    }
    .result strong{color:#fff}
    .note{color:var(--muted);font-size:12px;margin-top:8px}

    /* Testimonials */
    .testGrid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    .test{
      border:1px solid var(--line);
      border-radius:22px;
      padding:14px;
      background:rgba(255,255,255,.03);
    }
    .test .top{display:flex;justify-content:space-between;gap:10px;align-items:flex-start}
    .stars{color:var(--yellow);font-size:12px;white-space:nowrap}
    .test .name{font-weight:900}
    .test .meta{color:var(--muted);font-size:12px;margin-top:2px}
    .test p{color:rgba(233,237,245,.82);font-size:13px;margin:10px 0 0;line-height:1.4}

    /* FAQ */
    details{
      border:1px solid var(--line);
      border-radius:18px;
      padding:12px 14px;
      background:rgba(255,255,255,.02);
    }
    details + details{margin-top:10px}
    summary{cursor:pointer;font-weight:900}
    details p{color:rgba(233,237,245,.80);margin:10px 0 0}

    /* Footer */
    footer{
      border-top:1px solid var(--line);
      padding:28px 0 40px;
      color:rgba(233,237,245,.70);
    }
    .footGrid{display:grid;grid-template-columns:1.2fr 1fr 1fr;gap:14px}
    .social{
      display:flex;gap:10px;flex-wrap:wrap;margin-top:10px
    }
    .social a{
      width:44px;height:44px;border-radius:14px;
      display:grid;place-items:center;
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      text-decoration:none;
    }
    .social a:hover{background:rgba(255,255,255,.07);border-color:rgba(0,200,255,.25)}
    .tiny{font-size:12px;color:var(--muted)}

    /* Floating tip */
    #tip{
      position:fixed;left:50%;bottom:18px;transform:translateX(-50%);
      background:rgba(0,200,255,.92);
      color:#05121a;
      border:1px solid rgba(255,255,255,.25);
      box-shadow:0 20px 50px rgba(0,200,255,.18);
      border-radius:999px;
      padding:10px 14px;
      z-index:80;
      max-width:min(760px,92vw);
      display:none;
      font-weight:900;
      gap:10px;
      align-items:center;
    }
    #tip small{font-weight:700;opacity:.85}
    #tip .x{
      margin-left:auto;
      width:30px;height:30px;border-radius:999px;
      background:rgba(0,0,0,.18);
      display:grid;place-items:center;
      cursor:pointer;
    }

    /* Admin */
    .adminFab{
      position:fixed;right:16px;bottom:16px;z-index:90;
      display:flex;flex-direction:column;gap:10px;align-items:flex-end;
    }
    .fabBtn{
      border-radius:999px;
      padding:12px 14px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.05);
      color:var(--text);
      text-decoration:none;
      font-weight:900;
      display:inline-flex;gap:10px;align-items:center;
      cursor:pointer;
    }
    .fabBtn:hover{background:rgba(255,255,255,.09)}
    .fabBtn.primary{
      background:linear-gradient(90deg,var(--blue),#3bd9ff);
      color:#041018;border-color:rgba(255,255,255,.14);
      box-shadow:0 16px 45px rgba(0,200,255,.20);
    }

    .modal{
      position:fixed;inset:0;z-index:100;
      background:rgba(0,0,0,.75);
      display:none;
      align-items:center;justify-content:center;
      padding:18px;
    }
    .modal.show{display:flex}
    .panel{
      width:min(980px,96vw);
      border-radius:22px;
      border:1px solid rgba(255,255,255,.10);
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(0,0,0,.55));
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .panelHead{
      padding:14px 14px;
      border-bottom:1px solid var(--line);
      display:flex;align-items:center;justify-content:space-between;gap:10px;
    }
    .panelHead h3{margin:0;font-size:14px;letter-spacing:.12em;text-transform:uppercase}
    .close{cursor:pointer;border:1px solid var(--line);background:rgba(255,255,255,.03);color:var(--text);
      border-radius:14px;padding:10px 12px;font-weight:900}
    .panelBody{padding:14px}
    .adminGrid{display:grid;grid-template-columns:1fr 1.2fr;gap:12px}
    .box{
      border:1px solid var(--line);
      border-radius:18px;
      background:rgba(255,255,255,.02);
      padding:12px;
    }
    .box h4{margin:0 0 10px;font-size:13px;letter-spacing:.08em;text-transform:uppercase;color:rgba(233,237,245,.85)}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .row3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px}
    .mut{color:var(--muted);font-size:12px}
    .btnWide{
      width:100%;
      padding:12px 14px;border-radius:14px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.05);
      color:var(--text);
      font-weight:900;cursor:pointer;
    }
    .btnWide:hover{background:rgba(255,255,255,.08)}
    .btnWide.orange{background:rgba(255,92,0,.18);border-color:rgba(255,92,0,.28)}
    .btnWide.orange:hover{background:rgba(255,92,0,.24)}
    .btnWide.green{background:rgba(34,197,94,.18);border-color:rgba(34,197,94,.28)}
    .btnWide.green:hover{background:rgba(34,197,94,.24)}

    /* Invoice preview */
    .invoicePreview{
      background:#fff;color:#111;border-radius:16px;
      border:1px solid rgba(0,0,0,.12);
      overflow:hidden;
    }
    .invPad{padding:14px}
    .invTop{
      display:flex;justify-content:space-between;gap:10px;align-items:flex-start;
      border-bottom:1px solid rgba(0,0,0,.12);padding:14px;
    }
    .invBrand{display:flex;gap:10px;align-items:center}
    .invBrand img{height:42px;border-radius:10px}
    .invBrand .t1{font-weight:900}
    .invBrand .t2{font-size:12px;color:#444;margin-top:2px}
    .invMeta{font-size:12px;color:#222;text-align:right}
    .invMeta b{display:block;font-size:12px}
    table{width:100%;border-collapse:collapse}
    th,td{padding:9px;border-bottom:1px solid rgba(0,0,0,.10);font-size:12px}
    th{text-align:left;background:#f5f6f8}
    td.r{text-align:right}
    .totals{
      display:grid;grid-template-columns:1fr 1fr;gap:10px;
      padding:14px;border-top:1px solid rgba(0,0,0,.12);
    }
    .totals .boxT{
      border:1px solid rgba(0,0,0,.12);border-radius:12px;padding:12px;
    }
    .totals .boxT .k{font-size:12px;color:#333}
    .totals .boxT .v{font-size:14px;font-weight:900;margin-top:4px}
    .invFoot{padding:12px;color:#444;font-size:11px;border-top:1px solid rgba(0,0,0,.12);background:#fafafa}

    /* Print */
    @media print{
      body{background:#fff}
      header,.hero,.adminFab,#tip,footer{display:none !important}
      .modal{position:static;inset:auto;background:#fff;padding:0;display:block !important}
      .panel{box-shadow:none;border:none;background:#fff}
      .panelHead,.adminGrid .box:not(.printOnly){display:none !important}
      .panelBody{padding:0}
      .invoicePreview{border:none;border-radius:0}
    }

    /* Responsive */
    @media (max-width:1050px){
      .cards{grid-template-columns:repeat(2,1fr)}
      .features{grid-template-columns:repeat(2,1fr)}
      .testGrid{grid-template-columns:1fr}
      .footGrid{grid-template-columns:1fr}
      .heroGrid{grid-template-columns:1fr}
      .formGrid{grid-template-columns:1fr 1fr}
      .adminGrid{grid-template-columns:1fr}
    }
    @media (max-width:560px){
      .formGrid{grid-template-columns:1fr}
      .links{display:none}
      .brand{min-width:auto}
      .heroCard{padding:42px 16px}
    }
  </style>
</head>

<body>
  <!-- HEADER -->
  <header>
    <div class="container">
      <div class="nav">
        <div class="brand">
          <img src="https://i.postimg.cc/dVXHwFxJ/Whats-App-Image-2026-02-03-at-9-11-46-PM.jpg" alt="BRUTALUX logo">
          <div>
            <div class="orbitron" style="font-weight:900;letter-spacing:.10em;text-transform:uppercase">
              BRUTA<span style="color:var(--orange)">LUX</span>
            </div>
            <div class="tag">Potentes y resistentes ‚Ä¢ 5 a√±os de garant√≠a</div>
          </div>
        </div>

        <div class="links">
          <a href="#catalogo">Cat√°logo</a>
          <a href="#compat">Compatibilidad</a>
          <a href="#testimonios">Opiniones</a>
          <a href="#faq">FAQ</a>
          <a href="#contacto">Contacto</a>
        </div>

        <div style="display:flex;gap:10px;align-items:center">
          <div class="pill">Tasa BCV: <b id="rateHeader">‚Äî</b></div>
          <a class="cta-wa" href="https://wa.me/584126835635" target="_blank" rel="noopener">
            <i class="fa-brands fa-whatsapp"></i> WhatsApp
          </a>
        </div>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <div class="hero">
    <div class="container">
      <div class="heroCard">
        <div class="heroGrid">
          <div>
            <h1 class="orbitron">Serie R <span class="grad">BRUTALUX</span></h1>
            <p>
              Faros LED para Toyota y cualquier veh√≠culo. M√°s luz, mejor corte, menor consumo y mayor durabilidad.
              <b style="color:var(--yellow)">Garant√≠a: 5 a√±os</b>.
            </p>
            <div class="heroBtns">
              <a class="btn btnPrimary orbitron" href="#catalogo"><i class="fa-solid fa-bolt"></i> Ver cat√°logo</a>
              <a class="btn orbitron" href="#compat"><i class="fa-solid fa-car"></i> ¬øQu√© luz usa mi auto?</a>
              <a class="btn orbitron" href="#facturar"><i class="fa-solid fa-file-invoice"></i> Facturar venta</a>
            </div>
          </div>

          <div class="heroStats">
            <div class="statGrid">
              <div class="stat">
                <div class="k orbitron" style="color:var(--blue)">+Visibilidad</div>
                <div class="s">Mejor proyecci√≥n en carretera</div>
              </div>
              <div class="stat">
                <div class="k orbitron" style="color:var(--orange)">-Consumo</div>
                <div class="s">M√°s eficiente que hal√≥geno</div>
              </div>
              <div class="stat">
                <div class="k orbitron" style="color:var(--green)">Encendido</div>
                <div class="s">Instant√°neo, sin demora</div>
              </div>
              <div class="stat">
                <div class="k orbitron" style="color:var(--yellow)">5 a√±os</div>
                <div class="s">Garant√≠a Brutalux</div>
              </div>
            </div>
            <div class="badges">
              <span class="badge bBlue"><i class="fa-solid fa-circle-check"></i> Plug &amp; Play</span>
              <span class="badge bOrange"><i class="fa-solid fa-shield-halved"></i> Corte correcto</span>
              <span class="badge bGreen"><i class="fa-solid fa-droplet"></i> Resistencia</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- FEATURE STRIP -->
  <section>
    <div class="container">
      <div class="features">
        <div class="feature">
          <i class="fa-solid fa-eye"></i>
          <div>
            <div class="t orbitron">M√°s alcance</div>
            <div class="d">Mejor visibilidad y reacci√≥n.</div>
          </div>
        </div>
        <div class="feature">
          <i class="fa-solid fa-car-battery"></i>
          <div>
            <div class="t orbitron">Menos consumo</div>
            <div class="d">Cuida bater√≠a y alternador.</div>
          </div>
        </div>
        <div class="feature">
          <i class="fa-solid fa-temperature-low"></i>
          <div>
            <div class="t orbitron">Disipaci√≥n</div>
            <div class="d">Dise√±o pensado para durar.</div>
          </div>
        </div>
        <div class="feature">
          <i class="fa-solid fa-award"></i>
          <div>
            <div class="t orbitron">Garant√≠a 5 a√±os</div>
            <div class="d">Respaldo real Brutalux.</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CATALOGO -->
  <section id="catalogo">
    <div class="container">
      <div class="sectionTitle">
        <div>
          <h2 class="orbitron">Cat√°logo Brutalux</h2>
          <p>Precios en USD y referencia en Bs seg√∫n BCV.</p>
        </div>
        <div class="pill">Tasa hoy: <b id="rateBadge">‚Äî</b></div>
      </div>

      <div class="cards" id="productCards"></div>

      <p class="tiny" style="margin-top:12px">
        Nota: Si necesitas otro tipo de bombillo (H1, H7, H11, HB3, HB4, etc.), escr√≠benos por WhatsApp y lo cotizamos.
      </p>
    </div>
  </section>

  <!-- COMPATIBILIDAD -->
  <section id="compat">
    <div class="container">
      <div class="sectionTitle">
        <div>
          <h2 class="orbitron">¬øQu√© luz LED usa mi auto?</h2>
          <p>Selecciona marca, modelo y a√±o. Te mostramos el socket y una recomendaci√≥n.</p>
        </div>
      </div>

      <div class="compatBox">
        <div class="formGrid">
          <div>
            <label>Marca</label>
            <select id="cBrand">
              <option value="">Selecciona</option>
              <option value="Toyota">Toyota</option>
              <option value="Ford">Ford</option>
              <option value="Chevrolet">Chevrolet</option>
            </select>
          </div>
          <div>
            <label>Modelo</label>
            <select id="cModel" disabled>
              <option value="">Primero marca</option>
            </select>
          </div>
          <div>
            <label>A√±o</label>
            <select id="cYear" disabled>
              <option value="">A√±o</option>
            </select>
          </div>
          <div>
            <button class="btnWide orange orbitron" id="btnCompat"><i class="fa-solid fa-magnifying-glass"></i> Consultar</button>
          </div>
        </div>

        <div class="result" id="compatResult" style="display:none"></div>
        <div class="note">
          Importante: La compatibilidad puede variar por versi√≥n/mercado. Si tu resultado no aparece, escr√≠benos por WhatsApp con una foto del faro y te asesoramos.
        </div>
      </div>
    </div>
  </section>

  <!-- TESTIMONIOS -->
  <section id="testimonios">
    <div class="container">
      <div class="sectionTitle">
        <div>
          <h2 class="orbitron">Opiniones reales</h2>
          <p>Prueba social para que compres con confianza.</p>
        </div>
      </div>

      <div class="testGrid">
        <div class="test">
          <div class="top">
            <div>
              <div class="name">Jos√© Q.</div>
              <div class="meta">Toyota Corolla ‚Ä¢ Miranda</div>
            </div>
            <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          </div>
          <p>‚ÄúInstal√© R33 y la diferencia es brutal. Corte limpio y much√≠simo alcance en carretera.‚Äù</p>
        </div>
        <div class="test">
          <div class="top">
            <div>
              <div class="name">Mar√≠a R.</div>
              <div class="meta">Ford Fiesta ‚Ä¢ Valencia</div>
            </div>
            <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          </div>
          <p>‚ÄúCon R36 ya no sufro en lluvia. Ilumina parejo y no parpadea.‚Äù</p>
        </div>
        <div class="test">
          <div class="top">
            <div>
              <div class="name">Carlos M.</div>
              <div class="meta">Chevrolet Corsa ‚Ä¢ Caracas</div>
            </div>
            <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          </div>
          <p>‚ÄúCompr√© R36T por el modo amarillo. En neblina es otra cosa. Recomendados.‚Äù</p>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <section id="faq">
    <div class="container">
      <div class="sectionTitle">
        <div>
          <h2 class="orbitron">Preguntas frecuentes</h2>
          <p>Respuestas claras para cerrar ventas m√°s r√°pido.</p>
        </div>
      </div>

      <details>
        <summary>¬øLas luces LED deslumbran?</summary>
        <p>Si el bombillo tiene buen dise√±o de haz y se instala correctamente, el corte es m√°s limpio que hal√≥geno. Nosotros te asesoramos seg√∫n tu faro.</p>
      </details>
      <details>
        <summary>¬øQu√© diferencia hay entre R33, R36, R36T y R20?</summary>
        <p>R33 es la m√°s potente, R36 es alta potencia balanceada, R36T es dual color (blanco/amarillo) y R20 es la opci√≥n m√°s econ√≥mica.</p>
      </details>
      <details>
        <summary>¬øGarant√≠a?</summary>
        <p>BRUTALUX ofrece <b>5 a√±os de garant√≠a</b> (seg√∫n condiciones de uso e instalaci√≥n). Conserva tu factura.</p>
      </details>
    </div>
  </section>

  <!-- FACTURAR -->
  <section id="facturar">
    <div class="container">
      <div class="sectionTitle">
        <div>
          <h2 class="orbitron">Facturar venta (Admin local)</h2>
          <p>Arma una factura con varios modelos y cantidades. Imprime o guarda como PDF.</p>
        </div>
        <div class="pill">Tip: usa <b>Ctrl+P</b> para guardar PDF</div>
      </div>

      <div class="compatBox">
        <p class="tiny" style="margin:0 0 10px">
          Nota importante: En GitHub Pages (est√°tico) esto se guarda solo en tu navegador (localStorage). Para facturaci√≥n fiscal real y correlativos oficiales se requiere backend.
        </p>
        <button class="btnWide green orbitron" id="openAdmin">
          <i class="fa-solid fa-lock"></i> Abrir panel Admin / Factura
        </button>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer id="contacto">
    <div class="container">
      <div class="footGrid">
        <div>
          <div class="orbitron" style="font-weight:900;letter-spacing:.10em;text-transform:uppercase">
            BRUTA<span style="color:var(--orange)">LUX</span>
          </div>
          <p class="tiny" style="margin:10px 0 0">
            Potentes y resistentes ‚Ä¢ Garant√≠a 5 a√±os ‚Ä¢ Venezuela
          </p>
          <div class="social">
            <a href="https://www.instagram.com/bruta_lux?igsh=MXN5ZTg0ZG1uc2k5cw==" target="_blank" rel="noopener" aria-label="Instagram">
              <i class="fa-brands fa-instagram"></i>
            </a>
            <a href="https://www.tiktok.com/@brutaluxlighting?_r=1&_t=ZS-93e9bBF4ckc" target="_blank" rel="noopener" aria-label="TikTok">
              <i class="fa-brands fa-tiktok"></i>
            </a>
            <a href="https://wa.me/584126835635" target="_blank" rel="noopener" aria-label="WhatsApp">
              <i class="fa-brands fa-whatsapp"></i>
            </a>
          </div>
        </div>

        <div>
          <div class="orbitron" style="font-weight:900;letter-spacing:.08em;text-transform:uppercase">Atenci√≥n</div>
          <p class="tiny" style="margin:10px 0 0">Asesor√≠a por compatibilidad ‚Ä¢ Env√≠os nacionales ‚Ä¢ Soporte postventa</p>
        </div>

        <div>
          <div class="orbitron" style="font-weight:900;letter-spacing:.08em;text-transform:uppercase">Contacto</div>
          <p class="tiny" style="margin:10px 0 0"><b>WhatsApp:</b> +58 412 6835635</p>
          <p class="tiny" style="margin:6px 0 0"><b>Redes:</b> @bruta_lux / @brutaluxlighting</p>
        </div>
      </div>

      <p class="tiny" style="margin-top:18px;opacity:.8">¬© <span id="yearNow"></span> BRUTALUX. Todos los derechos reservados.</p>
    </div>
  </footer>

  <!-- Floating tip -->
  <div id="tip">
    <span id="tipText">Consejo</span>
    <small id="tipN"></small>
    <div class="x" id="tipClose"><i class="fa-solid fa-xmark"></i></div>
  </div>

  <!-- Admin FAB -->
  <div class="adminFab">
    <button class="fabBtn primary orbitron" id="fabAdmin"><i class="fa-solid fa-user-gear"></i> Admin</button>
  </div>

  <!-- ADMIN MODAL -->
  <div class="modal" id="adminModal" aria-hidden="true">
    <div class="panel">
      <div class="panelHead">
        <h3 class="orbitron">Panel Admin ‚Ä¢ Tasa ‚Ä¢ Im√°genes ‚Ä¢ Factura</h3>
        <button class="close orbitron" id="closeAdmin"><i class="fa-solid fa-xmark"></i> Cerrar</button>
      </div>

      <div class="panelBody">
        <div id="loginBox" class="box">
          <h4>Login</h4>
          <div class="row">
            <div>
              <label>Usuario</label>
              <input id="adminUser" placeholder="Usuario">
            </div>
            <div>
              <label>Clave</label>
              <input id="adminPass" type="password" placeholder="Contrase√±a">
            </div>
          </div>
          <div style="margin-top:10px" class="row">
            <button class="btnWide green orbitron" id="btnLogin"><i class="fa-solid fa-right-to-bracket"></i> Entrar</button>
            <button class="btnWide orbitron" id="btnLogout" style="display:none"><i class="fa-solid fa-right-from-bracket"></i> Salir</button>
          </div>
          <p class="mut" style="margin:10px 0 0">
            Nota: En web est√°tica (GitHub Pages) esto es control local del navegador. Para un admin real en l√≠nea se necesita backend.
          </p>
        </div>

        <div id="adminArea" style="display:none">
          <div class="adminGrid">

            <!-- Settings -->
            <div class="box">
              <h4>Configuraci√≥n del sitio</h4>

              <div class="row">
                <div>
                  <label>Tasa BCV (Bs/USD)</label>
                  <input id="rateInput" placeholder="Ej: 375,08">
                </div>
                <div>
                  <label>Garant√≠a (texto)</label>
                  <input id="warrantyInput" placeholder="Ej: 5 a√±os">
                </div>
              </div>

              <div style="margin-top:10px" class="row">
                <div>
                  <label>Logo (URL directa)</label>
                  <input id="logoInput" placeholder="https://...jpg">
                </div>
                <div>
                  <label>Fondo portada (URL directa)</label>
                  <input id="heroBgInput" placeholder="https://...jpg">
                </div>
              </div>

              <div style="margin-top:10px" class="row">
                <button class="btnWide orange orbitron" id="btnSaveSettings"><i class="fa-solid fa-floppy-disk"></i> Guardar cambios</button>
                <button class="btnWide orbitron" id="btnResetSettings"><i class="fa-solid fa-rotate-left"></i> Restaurar</button>
              </div>
              <p class="mut" style="margin:10px 0 0">
                Cambios visibles al instante para ti (se guardan en este navegador). Para que lo vean todos en tiempo real hace falta backend.
              </p>
            </div>

            <!-- Invoice builder -->
            <div class="box printOnly">
              <h4>Facturar venta</h4>

              <div class="row">
                <div>
                  <label>Cliente / Raz√≥n social</label>
                  <input id="invClient" placeholder="Nombre del cliente">
                </div>
                <div>
                  <label>C√©dula / RIF</label>
                  <input id="invId" placeholder="V-12345678 / J-123...">
                </div>
              </div>

              <div style="margin-top:10px" class="row">
                <div>
                  <label>Tel√©fono</label>
                  <input id="invPhone" placeholder="+58...">
                </div>
                <div>
                  <label>Direcci√≥n</label>
                  <input id="invAddr" placeholder="Direcci√≥n del cliente">
                </div>
              </div>

              <div style="margin-top:10px" class="row3">
                <div>
                  <label>Producto</label>
                  <select id="invProduct"></select>
                </div>
                <div>
                  <label>Cantidad</label>
                  <input id="invQty" type="number" min="1" value="1">
                </div>
                <div>
                  <label>Precio (USD)</label>
                  <input id="invPrice" type="number" step="0.01" placeholder="Auto">
                </div>
              </div>

              <div style="margin-top:10px" class="row">
                <button class="btnWide green orbitron" id="btnAddItem"><i class="fa-solid fa-plus"></i> Agregar a factura</button>
                <button class="btnWide orbitron" id="btnClearItems"><i class="fa-solid fa-trash"></i> Vaciar</button>
              </div>

              <div style="margin-top:10px" class="row">
                <div>
                  <label>IVA %</label>
                  <input id="invTax" type="number" step="0.01" value="0">
                </div>
                <div>
                  <label>Descuento (USD)</label>
                  <input id="invDiscount" type="number" step="0.01" value="0">
                </div>
              </div>

              <div style="margin-top:10px" class="row">
                <button class="btnWide orange orbitron" id="btnRefreshInvoice"><i class="fa-solid fa-arrows-rotate"></i> Actualizar</button>
                <button class="btnWide green orbitron" id="btnPrint"><i class="fa-solid fa-print"></i> Imprimir / Guardar PDF</button>
              </div>

              <p class="mut" style="margin:10px 0 0">
                Si no abre imprimir: debe ser un clic directo al bot√≥n ‚ÄúImprimir / Guardar PDF‚Äù. En algunos m√≥viles el navegador limita impresi√≥n.
              </p>
            </div>

          </div>

          <!-- Invoice Preview -->
          <div class="box printOnly" style="margin-top:12px">
            <h4>Vista previa de la factura</h4>
            <div class="invoicePreview" id="invoicePreview"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    /**********************
     * CONFIG / DEFAULTS
     **********************/
    const ADMIN_USER = "Manuel255";
    const ADMIN_PASS = "30158858Jm";
    const WHATSAPP = "584126835635";

    const DEFAULTS = {
      rate: 375.08,
      warranty: "5 a√±os",
      logo: "https://i.postimg.cc/dVXHwFxJ/Whats-App-Image-2026-02-03-at-9-11-46-PM.jpg",
      heroBg: "https://images.unsplash.com/photo-1525609004556-c46c7d6cf023?auto=format&fit=crop&w=2200&q=80"
    };

    // IMPORTANT: Product-image mapping corrected as per your last instruction set:
    // R36 = left (gold Break Dark)
    // R33 = middle (bronze/dark)
    // R36T = right (silver/dual color photo)
    // (If you want a different mapping later, just swap image URLs below.)
    const PRODUCTS = [
      {
        id: "R36",
        name: "Brutalux R36",
        modelLine: "MODELO R36 ¬∑ 27.000 LM",
        usd: 80,
        badge: { text: "‚ö° R36 ¬∑ ALTA POTENCIA", cls: "tBlue" },
        image: "https://i.postimg.cc/wxV6w417/Whats_App_Imag_√±e_2026_02_03_at_8_35_01_PM.jpg",
        specs: ["27.000 lm (par)", "6500K blanco puro", "4 tubos de cobre + disipaci√≥n"],
        waText: "Hola, me interesa la BRUTALUX R36 ($80)."
      },
      {
        id: "R33",
        name: "Brutalux R33",
        modelLine: "MODELO R33 ¬∑ 33.000 LM",
        usd: 90,
        badge: { text: "üëë R33 ¬∑ TOP POTENCIA", cls: "tGold" },
        image: "https://i.postimg.cc/3rBKtfkN/Whats_App_Im_age_2026_02_03_at_8_35_01_PM.jpg",
        specs: ["33.000 lm (par)", "6500K blanco puro", "Zinc + 3 tubos de cobre"],
        waText: "Hola, me interesa la BRUTALUX R33 ($90)."
      },
      {
        id: "R36T",
        name: "Brutalux R36T",
        modelLine: "MODELO R36T ¬∑ 16.000 LM",
        usd: 85,
        badge: { text: "üåì R36T ¬∑ BLANCO / AMARILLO", cls: "tPurple" },
        image: "https://i.postimg.cc/SQryg1nn/Whats_App_Image_2026_02_03_at_8_35_01_PM.jpg",
        specs: ["16.000 lm (par)", "3000K‚Äì6500K (dual)", "Chip CSP 12 n√∫cleos"],
        waText: "Hola, me interesa la BRUTALUX R36T ($85) dual color."
      },
      {
        id: "R20",
        name: "Brutalux R20",
        modelLine: "MODELO R20 ¬∑ 20.000 LM",
        usd: 65,
        badge: { text: "üëç R20 ¬∑ ECON√ìMICA", cls: "tGray" },
        image: "https://images.unsplash.com/photo-1609079907678-3e25af9c4f25?auto=format&fit=crop&w=1200&q=80",
        specs: ["20.000 lm (par)", "12V/24V", "Calidad / precio"],
        waText: "Hola, me interesa la BRUTALUX R20 ($65)."
      }
    ];

    const TIPS = [
      "Las LED consumen menos energ√≠a que las hal√≥genas: m√°s bater√≠a y alternador.",
      "El encendido LED es instant√°neo: reacci√≥n m√°s r√°pida en carretera.",
      "Mejor temperatura de color = m√°s contraste y visibilidad nocturna.",
      "Un corte de haz correcto reduce el deslumbramiento a otros conductores.",
      "Menos calor en el faro ayuda a cuidar el arn√©s y el reflector.",
      "Mayor vida √∫til: menos cambios y menos gastos a largo plazo.",
      "R36T en amarillo mejora visibilidad en niebla y lluvia.",
      "Buena disipaci√≥n mantiene el rendimiento constante en viajes largos.",
      "Con LED ves m√°s lejos: frenas antes, conduces m√°s seguro.",
      "Ideal para carretera oscura y zonas rurales."
    ];

    /**********************
     * UTILITIES
     **********************/
    const fmtBs = (n) => new Intl.NumberFormat('es-VE', {minimumFractionDigits:2, maximumFractionDigits:2}).format(n);
    const fmtUsd = (n) => new Intl.NumberFormat('en-US', {minimumFractionDigits:2, maximumFractionDigits:2}).format(n);

    function getState(){
      const raw = localStorage.getItem("brutalux_state");
      if(!raw) return {...DEFAULTS};
      try { return {...DEFAULTS, ...JSON.parse(raw)}; } catch { return {...DEFAULTS}; }
    }
    function setState(next){
      localStorage.setItem("brutalux_state", JSON.stringify(next));
    }

    /**********************
     * RENDER CATALOG
     **********************/
    function renderRate(){
      const st = getState();
      document.getElementById("rateHeader").textContent = fmtBs(st.rate);
      document.getElementById("rateBadge").textContent = fmtBs(st.rate);
    }

    function renderCatalog(){
      const st = getState();
      const wrap = document.getElementById("productCards");
      wrap.innerHTML = PRODUCTS.map(p=>{
        const bs = p.usd * st.rate;
        return `
          <article class="card">
            <div class="img">
              <div class="tagTop ${p.badge.cls}">${p.badge.text}</div>
              <img src="${p.image}" alt="${p.name}">
            </div>
            <div class="body">
              <div class="model orbitron">${p.modelLine}</div>
              <h3 class="name orbitron">${p.name}</h3>
              <ul class="spec">
                ${p.specs.map(s=>`<li><i class="fa-solid fa-bolt"></i> ${s}</li>`).join("")}
                <li><i class="fa-solid fa-shield-halved"></i> Garant√≠a: ${st.warranty}</li>
              </ul>

              <div class="priceRow">
                <div>
                  <div class="usd orbitron">$${p.usd}</div>
                  <div class="bs">(Bs ${fmtBs(bs)})</div>
                </div>
              </div>

              <div class="actions">
                <a class="btnSmall btnGreen orbitron" target="_blank" rel="noopener"
                  href="https://wa.me/${WHATSAPP}?text=${encodeURIComponent(p.waText + ' Tasa BCV: ' + fmtBs(st.rate) + ' Bs/USD')}">
                  <i class="fa-brands fa-whatsapp"></i> Pedir por WhatsApp
                </a>
                <button class="btnSmall btnOrange orbitron" onclick="openAdminAndPreselect('${p.id}')">
                  <i class="fa-solid fa-file-invoice"></i> Facturar
                </button>
              </div>
            </div>
          </article>
        `;
      }).join("");

      // apply settings to logo and hero background
      document.querySelectorAll('.brand img').forEach(img=>img.src = st.logo);
      document.querySelectorAll('.invBrand img').forEach(img=>img.src = st.logo);
      document.querySelector('.heroCard').style.backgroundImage =
        `linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.80)), url("${st.heroBg}")`;
    }

    /**********************
     * TIP ON CLICK
     **********************/
    let tipIdx = 0;
    function showTip(){
      const tip = document.getElementById("tip");
      const t = TIPS[tipIdx % TIPS.length];
      tipIdx++;
      document.getElementById("tipText").textContent = "üí° Consejo Brutalux: " + t;
      document.getElementById("tipN").textContent = `#${tipIdx}/${TIPS.length}`;
      tip.style.display = "flex";
      clearTimeout(window.__tipTO);
      window.__tipTO = setTimeout(()=> tip.style.display="none", 4200);
    }
    document.addEventListener("click", (e)=>{
      // avoid on inputs/buttons within admin modal to not annoy
      const inAdmin = e.target.closest("#adminModal");
      if(inAdmin) return;
      // avoid on links that navigate
      if(e.target.closest("a")) return;
      showTip();
    });
    document.getElementById("tipClose").addEventListener("click", ()=> document.getElementById("tip").style.display="none");

    /**********************
     * COMPATIBILITY DATA (simple demo dataset)
     * NOTE: A full 2000-2026 dataset for ALL Toyota/Ford/Chevrolet models is huge.
     * Here we implement the UI + a starter dataset. You can expand the DATA table.
     **********************/
    const COMPAT = {
      Toyota: {
        "Land Cruiser": { socket: "H4 (var√≠a por versi√≥n)", rec:"R33 / R36", years:[2000,2026] },
        "4Runner": { socket: "H11 / HB3 (var√≠a)", rec:"R36 / R33", years:[2000,2026] },
        "Corolla": { socket: "H4 / H11 (var√≠a)", rec:"R36", years:[2000,2026] },
        "Hilux": { socket: "H4 / H11 (var√≠a)", rec:"R36 / R33", years:[2000,2026] }
      },
      Ford: {
        "Fiesta": { socket:"H4 (var√≠a)", rec:"R36", years:[2000,2026] },
        "Ranger": { socket:"H4 / H11 (var√≠a)", rec:"R36 / R33", years:[2000,2026] },
        "Explorer": { socket:"H11 / HB3 (var√≠a)", rec:"R36 / R33", years:[2000,2026] }
      },
      Chevrolet: {
        "Corsa": { socket:"H4 (var√≠a)", rec:"R20 / R36", years:[2000,2026] },
        "Aveo": { socket:"H4 (var√≠a)", rec:"R36", years:[2000,2026] },
        "Spark": { socket:"H4 (var√≠a)", rec:"R20 / R36", years:[2000,2026] }
      }
    };

    function fillYears(){
      const y = document.getElementById("cYear");
      y.innerHTML = `<option value="">A√±o</option>` + Array.from({length: 2026-2000+1}, (_,i)=>2000+i)
        .map(v=>`<option value="${v}">${v}</option>`).join("");
    }

    function fillModels(brand){
      const m = document.getElementById("cModel");
      const models = COMPAT[brand] ? Object.keys(COMPAT[brand]) : [];
      m.innerHTML = `<option value="">Selecciona modelo</option>` + models.map(x=>`<option value="${x}">${x}</option>`).join("");
    }

    function doCompat(){
      const b = document.getElementById("cBrand").value;
      const m = document.getElementById("cModel").value;
      const y = parseInt(document.getElementById("cYear").value,10);
      const out = document.getElementById("compatResult");

      if(!b || !m || !y){
        out.style.display="block";
        out.innerHTML = `‚ö†Ô∏è Completa <strong>marca, modelo y a√±o</strong>.`;
        return;
      }
      const row = COMPAT[b]?.[m];
      if(!row){
        out.style.display="block";
        out.innerHTML = `No encontramos datos para <strong>${b} ${m}</strong>. Escr√≠benos por WhatsApp y te asesoramos.`;
        return;
      }
      if(y < row.years[0] || y > row.years[1]){
        out.style.display="block";
        out.innerHTML = `A√±o fuera de rango para nuestra tabla. Escr√≠benos por WhatsApp.`;
        return;
      }

      out.style.display="block";
      out.innerHTML = `
        ‚úÖ <strong>${b} ${m} ${y}</strong><br>
        ‚Ä¢ Tipo de luz (referencial): <strong>${row.socket}</strong><br>
        ‚Ä¢ Recomendaci√≥n Brutalux: <strong>${row.rec}</strong><br>
        <div class="tiny" style="margin-top:8px;color:#6b7280">
          Si tu versi√≥n cambia de socket, m√°ndanos foto del bombillo o del faro.
        </div>
      `;
    }

    /**********************
     * ADMIN MODAL + LOGIN
     **********************/
    const adminModal = document.getElementById("adminModal");
    const fabAdmin = document.getElementById("fabAdmin");
    const openAdmin = document.getElementById("openAdmin");
    const closeAdmin = document.getElementById("closeAdmin");
    const btnLogin = document.getElementById("btnLogin");
    const btnLogout = document.getElementById("btnLogout");

    function showModal(){ adminModal.classList.add("show"); adminModal.setAttribute("aria-hidden","false"); }
    function hideModal(){ adminModal.classList.remove("show"); adminModal.setAttribute("aria-hidden","true"); }

    fabAdmin.addEventListener("click", ()=> { showModal(); });
    openAdmin.addEventListener("click", ()=> { showModal(); });
    closeAdmin.addEventListener("click", ()=> { hideModal(); });

    adminModal.addEventListener("click", (e)=>{
      if(e.target === adminModal) hideModal();
    });

    function isLogged(){
      return localStorage.getItem("brutalux_admin") === "1";
    }
    function setLogged(v){
      localStorage.setItem("brutalux_admin", v ? "1" : "0");
    }
    function syncAdminUI(){
      const logged = isLogged();
      document.getElementById("adminArea").style.display = logged ? "block" : "none";
      btnLogout.style.display = logged ? "inline-block" : "none";
      btnLogin.style.display = logged ? "none" : "inline-block";

      if(logged){
        const st = getState();
        document.getElementById("rateInput").value = String(st.rate).replace(".", ",");
        document.getElementById("warrantyInput").value = st.warranty;
        document.getElementById("logoInput").value = st.logo;
        document.getElementById("heroBgInput").value = st.heroBg;
        fillInvoiceProductSelect();
        refreshInvoicePreview();
      }
    }

    btnLogin.addEventListener("click", ()=>{
      const u = document.getElementById("adminUser").value.trim();
      const p = document.getElementById("adminPass").value.trim();
      if(u === ADMIN_USER && p === ADMIN_PASS){
        setLogged(true);
        syncAdminUI();
      } else {
        alert("Usuario o contrase√±a incorrectos.");
      }
    });

    btnLogout.addEventListener("click", ()=>{
      setLogged(false);
      syncAdminUI();
    });

    document.getElementById("btnSaveSettings").addEventListener("click", ()=>{
      const st = getState();
      const rateRaw = document.getElementById("rateInput").value.trim().replace(".", "").replace(",", ".");
      const rate = parseFloat(rateRaw);
      const warranty = document.getElementById("warrantyInput").value.trim() || DEFAULTS.warranty;
      const logo = document.getElementById("logoInput").value.trim() || DEFAULTS.logo;
      const heroBg = document.getElementById("heroBgInput").value.trim() || DEFAULTS.heroBg;

      if(!isFinite(rate) || rate <= 0){
        alert("Tasa inv√°lida. Ej: 375,08");
        return;
      }

      const next = {...st, rate, warranty, logo, heroBg};
      setState(next);
      renderRate();
      renderCatalog();
      refreshInvoicePreview();
      alert("Guardado (local).");
    });

    document.getElementById("btnResetSettings").addEventListener("click", ()=>{
      if(!confirm("¬øRestaurar valores por defecto?")) return;
      setState({...DEFAULTS});
      renderRate();
      renderCatalog();
      syncAdminUI();
    });

    /**********************
     * INVOICE BUILDER (multi-item)
     **********************/
    function getInvoice(){
      const raw = localStorage.getItem("brutalux_invoice");
      if(!raw) return { items: [] };
      try { return JSON.parse(raw); } catch { return { items: [] }; }
    }
    function setInvoice(inv){
      localStorage.setItem("brutalux_invoice", JSON.stringify(inv));
    }

    function fillInvoiceProductSelect(){
      const sel = document.getElementById("invProduct");
      sel.innerHTML = PRODUCTS.map(p=>`<option value="${p.id}">${p.id} - ${p.name} ($${p.usd})</option>`).join("");
      sel.addEventListener("change", ()=>{
        const id = sel.value;
        const p = PRODUCTS.find(x=>x.id===id);
        if(p) document.getElementById("invPrice").value = p.usd;
      }, { once:false });
      // set initial price
      const first = PRODUCTS[0];
      if(first) document.getElementById("invPrice").value = first.usd;
    }

    function addItem(){
      const st = getState();
      const inv = getInvoice();

      const id = document.getElementById("invProduct").value;
      const p = PRODUCTS.find(x=>x.id===id);
      if(!p){ alert("Producto inv√°lido."); return; }

      const qty = parseInt(document.getElementById("invQty").value,10);
      if(!isFinite(qty) || qty<=0){ alert("Cantidad inv√°lida."); return; }

      const price = parseFloat(document.getElementById("invPrice").value);
      if(!isFinite(price) || price<=0){ alert("Precio inv√°lido."); return; }

      inv.items.push({
        id: p.id,
        desc: `${p.name} (${p.id})`,
        qty,
        usd: price
      });
      setInvoice(inv);
      refreshInvoicePreview();
    }

    function clearItems(){
      if(!confirm("¬øVaciar la factura?")) return;
      setInvoice({items:[]});
      refreshInvoicePreview();
    }

    function removeItem(idx){
      const inv = getInvoice();
      inv.items.splice(idx,1);
      setInvoice(inv);
      refreshInvoicePreview();
    }

    document.getElementById("btnAddItem").addEventListener("click", addItem);
    document.getElementById("btnClearItems").addEventListener("click", clearItems);
    document.getElementById("btnRefreshInvoice").addEventListener("click", refreshInvoicePreview);

    // PRINT: must be direct user gesture; this button is direct, so it should open.
    document.getElementById("btnPrint").addEventListener("click", ()=>{
      refreshInvoicePreview();
      // give a small delay so DOM paints
      setTimeout(()=> window.print(), 80);
    });

    function refreshInvoicePreview(){
      const st = getState();
      const inv = getInvoice();

      const client = document.getElementById("invClient")?.value || "";
      const doc = document.getElementById("invId")?.value || "";
      const phone = document.getElementById("invPhone")?.value || "";
      const addr = document.getElementById("invAddr")?.value || "";

      const taxPct = parseFloat(document.getElementById("invTax")?.value || "0") || 0;
      const discount = parseFloat(document.getElementById("invDiscount")?.value || "0") || 0;

      const sub = inv.items.reduce((a,it)=> a + (it.qty * it.usd), 0);
      const tax = sub * (taxPct/100);
      const totalUsd = Math.max(0, (sub + tax - discount));
      const totalBs = totalUsd * st.rate;

      const now = new Date();
      const dateStr = now.toLocaleDateString("es-VE") + " " + now.toLocaleTimeString("es-VE", {hour:'2-digit', minute:'2-digit'});

      const rows = inv.items.map((it, idx)=>{
        const line = it.qty * it.usd;
        return `
          <tr>
            <td>${it.desc}</td>
            <td class="r">${it.qty}</td>
            <td class="r">$${fmtUsd(it.usd)}</td>
            <td class="r">$${fmtUsd(line)}</td>
            <td class="r"><button onclick="removeItem(${idx})" style="border:1px solid #ddd;background:#fff;border-radius:8px;padding:6px 10px;cursor:pointer">Quitar</button></td>
          </tr>
        `;
      }).join("");

      const html = `
        <div class="invTop">
          <div class="invBrand">
            <img src="${st.logo}" alt="logo">
            <div>
              <div class="t1">BRUTALUX</div>
              <div class="t2">Potentes y resistentes ‚Ä¢ Garant√≠a ${st.warranty}</div>
              <div class="t2">WhatsApp: +58 412 6835635</div>
            </div>
          </div>
          <div class="invMeta">
            <b>Factura / Nota de venta</b>
            <div>${dateStr}</div>
            <div><b>Tasa BCV:</b> ${fmtBs(st.rate)} Bs/USD</div>
          </div>
        </div>

        <div class="invPad">
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:10px">
            <div style="border:1px solid rgba(0,0,0,.12);border-radius:12px;padding:10px">
              <div style="font-weight:900;margin-bottom:4px">Datos del cliente</div>
              <div style="font-size:12px"><b>Nombre:</b> ${client || "‚Äî"}</div>
              <div style="font-size:12px"><b>C√©dula/RIF:</b> ${doc || "‚Äî"}</div>
              <div style="font-size:12px"><b>Tel√©fono:</b> ${phone || "‚Äî"}</div>
              <div style="font-size:12px"><b>Direcci√≥n:</b> ${addr || "‚Äî"}</div>
            </div>

            <div style="border:1px solid rgba(0,0,0,.12);border-radius:12px;padding:10px">
              <div style="font-weight:900;margin-bottom:4px">Resumen</div>
              <div style="font-size:12px"><b>Subtotal:</b> $${fmtUsd(sub)}</div>
              <div style="font-size:12px"><b>IVA (${taxPct}%):</b> $${fmtUsd(tax)}</div>
              <div style="font-size:12px"><b>Descuento:</b> $${fmtUsd(discount)}</div>
              <div style="margin-top:6px;font-size:12px"><b>Total USD:</b> $${fmtUsd(totalUsd)}</div>
              <div style="font-size:12px"><b>Total Bs:</b> Bs ${fmtBs(totalBs)}</div>
            </div>
          </div>

          <table>
            <thead>
              <tr>
                <th>Descripci√≥n</th>
                <th class="r">Cant</th>
                <th class="r">Precio</th>
                <th class="r">Total</th>
                <th class="r">Acci√≥n</th>
              </tr>
            </thead>
            <tbody>
              ${rows || `<tr><td colspan="5" style="color:#555">Sin items. Agrega productos.</td></tr>`}
            </tbody>
          </table>
        </div>

        <div class="totals">
          <div class="boxT">
            <div class="k">Total USD</div>
            <div class="v">$${fmtUsd(totalUsd)}</div>
          </div>
          <div class="boxT">
            <div class="k">Total Bs (ref.)</div>
            <div class="v">Bs ${fmtBs(totalBs)}</div>
          </div>
        </div>

        <div class="invFoot">
          Esta impresi√≥n es una nota/recibo digital de referencia. Para facturaci√≥n fiscal oficial se requiere sistema homologado e impresora fiscal (seg√∫n normativa).
        </div>
      `;

      const pv = document.getElementById("invoicePreview");
      pv.innerHTML = html;
    }

    // allow preview to update as user types
    ["invClient","invId","invPhone","invAddr","invTax","invDiscount"].forEach(id=>{
      const el = document.getElementById(id);
      if(el) el.addEventListener("input", ()=> refreshInvoicePreview());
    });

    window.removeItem = removeItem;

    function openAdminAndPreselect(productId){
      showModal();
      // if not logged, just open; once logged they can use invoice
      setTimeout(()=>{
        if(isLogged()){
          const sel = document.getElementById("invProduct");
          if(sel){
            sel.value = productId;
            const p = PRODUCTS.find(x=>x.id===productId);
            if(p) document.getElementById("invPrice").value = p.usd;
          }
        }
      }, 60);
    }
    window.openAdminAndPreselect = openAdminAndPreselect;

    /**********************
     * INIT
     **********************/
    document.getElementById("yearNow").textContent = new Date().getFullYear();

    // rate + catalog
    renderRate();
    renderCatalog();

    // compat selectors
    fillYears();
    document.getElementById("cBrand").addEventListener("change", (e)=>{
      const brand = e.target.value;
      const modelSel = document.getElementById("cModel");
      const yearSel = document.getElementById("cYear");
      if(!brand){
        modelSel.disabled = true; yearSel.disabled = true;
        modelSel.innerHTML = `<option value="">Primero marca</option>`;
        return;
      }
      fillModels(brand);
      modelSel.disabled = false;
      yearSel.disabled = false;
    });
    document.getElementById("btnCompat").addEventListener("click", doCompat);

    // admin init
    syncAdminUI();

    /**********************
     * PRINT ISSUE NOTE:
     * window.print() only works reliably in response to a direct user click.
     * Here we call it from btnPrint click handler. If on mobile, some browsers block it.
     **********************/
  </script>
</body>
</html>
