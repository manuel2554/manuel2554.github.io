<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BRUTALUX LIGHTING | Luces LED para todo tipo de vehículo</title>
  <meta property="og:title" content="BRUTALUX LIGHTING | Luces LED Potentes y Resistentes">
<meta property="og:description" content="Catálogo, compatibilidad y pedido rápido por WhatsApp. Garantía 5 años.">
<meta property="og:image" content="https://i.postimg.cc/dVXHwFxJ/Whats_App_Image_2026_02_03_at_9_11_46_PM.jpg">
<meta property="og:type" content="website">
<meta property="og:url" content="https://manuel2554.github.io/">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <style>
    /* ===== PRO UI Add-ons ===== */
.cta-cart{
  display:inline-flex;align-items:center;gap:10px;
  padding:10px 12px;border-radius:999px;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.04);
  color:rgba(233,237,245,.95);
  font-weight:1000;
  cursor:pointer;
}
.cta-cart:hover{background:rgba(255,255,255,.08)}
.cta-cart b{
  background:linear-gradient(90deg,var(--orange),#ff8a00);
  color:#1a0a00;
  padding:5px 9px;border-radius:999px;
  font-size:12px;
}

.compare{
  border:1px solid rgba(255,255,255,.10);
  border-radius:24px;
  overflow:hidden;
  background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(0,0,0,.25));
  box-shadow: 0 18px 50px rgba(0,0,0,.35);
}
.compareRow{
  display:grid;
  grid-template-columns: 1.35fr 1fr 1fr 1fr;
  align-items:stretch;
}
.compareRow > div{
  padding:14px 14px;
  border-bottom:1px solid rgba(255,255,255,.08);
  border-right:1px solid rgba(255,255,255,.06);
}
.compareRow > div:last-child{ border-right:none; }
.compareRow.head > div{
  background: rgba(255,255,255,.06);
  font-weight:1000;
  letter-spacing:.12em;
  text-transform:uppercase;
  font-size:12px;
  color: rgba(233,237,245,.92);
}
.compareRow .k{font-weight:1000;color: rgba(233,237,245,.95);}
.compareRow .v{color: rgba(233,237,245,.82);font-size:13px;line-height:1.35;}
.compareRow .best{
  background: linear-gradient(180deg, rgba(0,200,255,.14), rgba(255,92,0,.10));
  font-weight:1000;
}
.compareRow.head .best{
  color:#061018;
  background: linear-gradient(90deg, #00c8ff, #ff5c00);
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
}

.infoGrid{
  display:grid;
  grid-template-columns: repeat(3,1fr);
  gap:12px;
}
.infoCard{
  border:1px solid rgba(255,255,255,.10);
  border-radius:22px;
  padding:14px;
  background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(0,0,0,.22));
  box-shadow: 0 14px 40px rgba(0,0,0,.28);
}
.infoCard .h{
  font-weight:1000;
  letter-spacing:.08em;
  text-transform:uppercase;
  display:flex;gap:10px;align-items:center;
}
.infoCard .h i{color:var(--blue)}
.li{margin:10px 0 0;padding:0 0 0 18px;color:rgba(233,237,245,.82);font-size:13px}
.li li{margin:6px 0}

.steps{
  display:grid;
  grid-template-columns: repeat(2, 1fr);
  gap:12px;
}
.step{
  border:1px solid rgba(255,255,255,.10);
  border-radius:22px;
  padding:14px;
  background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(0,0,0,.22));
  box-shadow: 0 14px 40px rgba(0,0,0,.28);
  display:flex;gap:12px;
}
.step .n{
  width:42px;height:42px;border-radius:16px;
  display:grid;place-items:center;
  background:rgba(255,92,0,.16);
  border:1px solid rgba(255,92,0,.22);
  font-weight:1000;
}
.step .t{font-weight:1000}
.step .d{color:rgba(233,237,245,.78);font-size:13px;margin-top:4px}

.policy{
  display:grid;
  grid-template-columns: repeat(3,1fr);
  gap:12px;
}
.policyCard{
  border:1px solid rgba(255,255,255,.10);
  border-radius:22px;
  padding:14px;
  background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(0,0,0,.22));
  box-shadow: 0 14px 40px rgba(0,0,0,.28);
}
.policyCard .h{
  font-weight:1000;
  letter-spacing:.08em;
  text-transform:uppercase;
  display:flex;gap:10px;align-items:center;
}
.policyCard .h i{color:var(--yellow)}

.cartItems{display:grid;gap:10px}
.cartItem{
  display:grid;
  grid-template-columns: 1fr auto auto;
  gap:10px;
  align-items:center;
  padding:12px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.22);
}
.cartItem .t{font-weight:1000}
.cartItem .m{font-size:12px;color:rgba(233,237,245,.70);margin-top:3px}
.cartQty{
  width:92px;
  padding:10px 10px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(0,0,0,.30);
  color:var(--text);
}
.cartTotals{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}

@media (max-width:1050px){
  .infoGrid{grid-template-columns:1fr}
  .steps{grid-template-columns:1fr}
  .policy{grid-template-columns:1fr}
}

/* Comparativa responsive tipo cards */
@media (max-width: 720px){
  .compareRow{ grid-template-columns: 1fr; }
  .compareRow.head{ display:none; }
  .compareRow > div{ border-right:none; }
  .compareRow{ background: rgba(0,0,0,.18); }
  .compareRow > div:nth-child(2)::before{ content:"Halógeno: "; font-weight:1000; color:rgba(233,237,245,.92); }
  .compareRow > div:nth-child(3)::before{ content:"LED genérico: "; font-weight:1000; color:rgba(233,237,245,.92); }
  .compareRow > div:nth-child(4)::before{ content:"BRUTALUX: "; font-weight:1000; color:rgba(233,237,245,.92); }
  .compareRow > div:nth-child(4){ border-top:1px solid rgba(255,255,255,.08); }
}
    :root{
      --bg:#06070b;
      --card:#0d1018;
      --card2:#0b0d14;
      --muted:#9aa3b2;
      --text:#e9edf5;
      --line:rgba(255,255,255,.08);
      --blue:#00c8ff;
      --orange:#ff5c00;
      --green:#22c55e;
      --yellow:#fbbf24;
      --purple:#a855f7;
      --shadow:0 18px 60px rgba(0,0,0,.55);
      --r:18px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background: radial-gradient(1200px 600px at 20% 10%, rgba(0,200,255,.10), transparent 60%),
                  radial-gradient(900px 500px at 80% 20%, rgba(255,92,0,.10), transparent 60%),
                  var(--bg);
      color:var(--text);
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      overflow-x:hidden;
    }

    a{color:inherit}
    .container{max-width:1200px;margin:0 auto;padding:0 18px}
    .orbitron{font-family:Orbitron, Inter, system-ui}

    /* Header */
    header{
      position:sticky;top:0;z-index:50;
      backdrop-filter: blur(10px);
      background:rgba(6,7,11,.72);
      border-bottom:1px solid var(--line);
    }
    .nav{
      display:flex;align-items:center;justify-content:space-between;
      padding:12px 0; gap:14px;
    }
    .brand{
      display:flex;align-items:center;gap:12px;min-width:220px;
    }
    .brand img{
      height:44px;width:auto;display:block;border-radius:10px;
      box-shadow:0 0 0 1px rgba(255,255,255,.08) inset;
    }
    .brand .tag{
      font-size:11px;color:var(--muted);
      letter-spacing:.18em;text-transform:uppercase;margin-top:2px;
    }

    .links{display:flex;gap:14px;align-items:center;flex-wrap:wrap;justify-content:flex-end}
    .links a{
      text-decoration:none;
      font-size:13px;font-weight:600;
      color:rgba(233,237,245,.9);
      padding:8px 10px;border-radius:12px;
      border:1px solid transparent;
    }
    .links a:hover{border-color:var(--line);background:rgba(255,255,255,.04)}
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      padding:10px 12px;border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      font-weight:700;font-size:12px;
      white-space:nowrap;
    }
    .pill b{color:var(--yellow)}
    .cta-wa{
      text-decoration:none;
      display:inline-flex;align-items:center;gap:10px;
      padding:10px 14px;border-radius:999px;
      background:linear-gradient(90deg,#22c55e,#16a34a);
      color:#05130a;font-weight:900;
      box-shadow:0 12px 30px rgba(34,197,94,.25);
      border:1px solid rgba(255,255,255,.12);
      white-space:nowrap;
    }
    .cta-wa:hover{filter:brightness(1.05)}

    /* Hero */
    .hero{
      position:relative;
      padding:54px 0 28px;
      overflow:hidden;
    }
    .heroCard{
      position:relative;
      border:1px solid var(--line);
      background:
        linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.80)),
        url("https://images.unsplash.com/photo-1525609004556-c46c7d6cf023?auto=format&fit=crop&w=2200&q=80") center/cover no-repeat;
      border-radius:28px;
      box-shadow:var(--shadow);
      padding:54px 22px;
    }
    .heroGrid{display:grid;grid-template-columns:1.1fr .9fr;gap:18px;align-items:center}
    .hero h1{
      margin:0 0 10px;
      font-size:clamp(28px,4vw,46px);
      letter-spacing:.06em;
      text-transform:uppercase;
      text-shadow:0 0 30px rgba(255,92,0,.30);
    }
    .hero h1 .grad{
      background:linear-gradient(90deg,var(--blue),var(--orange));
      -webkit-background-clip:text;background-clip:text;color:transparent;
    }
    .hero p{margin:0 0 18px;color:rgba(233,237,245,.86);max-width:60ch}
    .heroBtns{display:flex;gap:10px;flex-wrap:wrap}
    .btn{
      border:1px solid var(--line);
      background:rgba(255,255,255,.05);
      color:var(--text);
      padding:12px 16px;border-radius:14px;
      font-weight:800;text-decoration:none;
      display:inline-flex;align-items:center;gap:10px;
    }
    .btn:hover{background:rgba(255,255,255,.08)}
    .btnPrimary{
      background:linear-gradient(90deg,var(--orange),#ff8a00);
      color:#1a0a00;border-color:rgba(255,255,255,.18);
      box-shadow:0 16px 45px rgba(255,92,0,.22);
    }
    .btnPrimary:hover{filter:brightness(1.05)}
    .heroStats{
      border:1px solid var(--line);
      background:rgba(0,0,0,.35);
      border-radius:22px;
      padding:18px;
    }
    .statGrid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .stat{
      padding:12px;border-radius:16px;
      background:rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.06);
    }
    .stat .k{font-weight:900;font-size:18px}
    .stat .s{color:var(--muted);font-size:12px;margin-top:4px}
    .badges{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
    .badge{
      font-size:12px;font-weight:900;
      border-radius:999px;padding:8px 10px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.05);
    }
    .bBlue{box-shadow:0 0 0 1px rgba(0,200,255,.22) inset}
    .bOrange{box-shadow:0 0 0 1px rgba(255,92,0,.22) inset}
    .bGreen{box-shadow:0 0 0 1px rgba(34,197,94,.22) inset}

    /* Section title */
    section{padding:26px 0}
    .sectionTitle{
      display:flex;align-items:flex-end;justify-content:space-between;gap:12px;
      margin:0 0 14px;
    }
    .sectionTitle h2{
      margin:0;
      font-size:20px;
      letter-spacing:.06em;
      text-transform:uppercase;
    }
    .sectionTitle p{margin:0;color:var(--muted);font-size:13px}

    /* Feature strip */
    .features{
      display:grid;
      grid-template-columns:repeat(4,1fr);
      gap:12px;
    }
    .feature{
      background:rgba(255,255,255,.03);
      border:1px solid var(--line);
      border-radius:18px;
      padding:14px;
      display:flex;gap:12px;align-items:flex-start;
    }
    .feature i{
      width:38px;height:38px;border-radius:14px;
      display:grid;place-items:center;
      background:rgba(0,200,255,.12);
      border:1px solid rgba(0,200,255,.18);
      color:var(--blue);
      flex:0 0 auto;
    }
    .feature .t{font-weight:900}
    .feature .d{color:var(--muted);font-size:12px;margin-top:3px}

    /* Catalog cards */
    .cards{display:grid;grid-template-columns:repeat(4,1fr);gap:14px}
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.015));
      border:1px solid var(--line);
      border-radius:22px;
      overflow:hidden;
      box-shadow:0 10px 30px rgba(0,0,0,.25);
      display:flex;flex-direction:column;
      min-height:100%;
    }
    .card .img{
      height:200px;background:#000;position:relative;overflow:hidden;
    }
    .card .img img{width:100%;height:100%;object-fit:cover;transform:scale(1.02);transition:.5s}
    .card:hover .img img{transform:scale(1.08)}
    .tagTop{
      position:absolute;left:12px;top:12px;
      font-size:12px;font-weight:900;
      padding:8px 12px;border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(0,0,0,.45);
      backdrop-filter: blur(8px);
      display:inline-flex;align-items:center;gap:8px;
    }
    .tGold{box-shadow:0 0 0 1px rgba(251,191,36,.25) inset}
    .tPurple{box-shadow:0 0 0 1px rgba(168,85,247,.25) inset}
    .tBlue{box-shadow:0 0 0 1px rgba(0,200,255,.25) inset}
    .tGray{box-shadow:0 0 0 1px rgba(148,163,184,.18) inset}

    .card .body{padding:14px 14px 12px;display:flex;flex-direction:column;gap:10px;flex:1}
    .card .model{color:rgba(255,255,255,.65);font-size:12px;letter-spacing:.14em;text-transform:uppercase}
    .card .name{margin:0;font-size:18px;letter-spacing:.04em}
    .spec{display:grid;gap:6px;margin:2px 0 0;padding:0;list-style:none}
    .spec li{font-size:12px;color:var(--muted);display:flex;gap:8px;align-items:flex-start}
    .spec i{color:var(--blue);margin-top:2px}
    .priceRow{
      margin-top:auto;
      padding-top:10px;border-top:1px solid var(--line);
      display:flex;align-items:baseline;justify-content:space-between;gap:10px;flex-wrap:wrap;
    }
    .usd{font-weight:900;font-size:20px}
    .bs{font-size:12px;color:rgba(233,237,245,.65)}
    .card .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .btnSmall{
      flex:1;
      display:inline-flex;align-items:center;justify-content:center;gap:10px;
      padding:10px 12px;border-radius:14px;
      text-decoration:none;
      border:1px solid var(--line);
      background:rgba(255,255,255,.04);
      font-weight:900;font-size:12px;
    }
    .btnSmall:hover{background:rgba(255,255,255,.07)}
    .btnGreen{background:rgba(34,197,94,.15);border-color:rgba(34,197,94,.25)}
    .btnGreen:hover{background:rgba(34,197,94,.22)}
    .btnOrange{background:rgba(255,92,0,.15);border-color:rgba(255,92,0,.25)}
    .btnOrange:hover{background:rgba(255,92,0,.22)}

    /* Compatibility */
    .compatBox{
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(0,0,0,.35));
      border-radius:22px;
      padding:16px;
      box-shadow:0 12px 40px rgba(0,0,0,.22);
    }
    .formGrid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;align-items:end}
    label{display:block;font-size:12px;color:rgba(233,237,245,.72);margin:0 0 6px}
    select,input{
      width:100%;
      padding:12px 12px;border-radius:14px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.35);
      color:var(--text);
      outline:none;
    }
    select:focus,input:focus{border-color:rgba(0,200,255,.35);box-shadow:0 0 0 4px rgba(0,200,255,.12)}
    .result{
      margin-top:12px;
      border:1px dashed rgba(255,255,255,.12);
      border-radius:18px;
      padding:12px;
      color:rgba(233,237,245,.86);
      background:rgba(255,255,255,.02);
    }
    .result strong{color:#fff}
    .note{color:var(--muted);font-size:12px;margin-top:8px}

    /* Testimonials */
    .testGrid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    .test{
      border:1px solid var(--line);
      border-radius:22px;
      padding:14px;
      background:rgba(255,255,255,.03);
    }
    .test .top{display:flex;justify-content:space-between;gap:10px;align-items:flex-start}
    .stars{color:var(--yellow);font-size:12px;white-space:nowrap}
    .test .name{font-weight:900}
    .test .meta{color:var(--muted);font-size:12px;margin-top:2px}
    .test p{color:rgba(233,237,245,.82);font-size:13px;margin:10px 0 0;line-height:1.4}

    /* FAQ */
    details{
      border:1px solid var(--line);
      border-radius:18px;
      padding:12px 14px;
      background:rgba(255,255,255,.02);
    }
    details + details{margin-top:10px}
    summary{cursor:pointer;font-weight:900}
    details p{color:rgba(233,237,245,.80);margin:10px 0 0}

    /* Footer */
    footer{
      border-top:1px solid var(--line);
      padding:28px 0 40px;
      color:rgba(233,237,245,.70);
    }
    .footGrid{display:grid;grid-template-columns:1.2fr 1fr 1fr;gap:14px}
    .social{
      display:flex;gap:10px;flex-wrap:wrap;margin-top:10px
    }
    .social a{
      width:44px;height:44px;border-radius:14px;
      display:grid;place-items:center;
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      text-decoration:none;
    }
    .social a:hover{background:rgba(255,255,255,.07);border-color:rgba(0,200,255,.25)}
    .tiny{font-size:12px;color:var(--muted)}

    /* ✅ Professional Tips Toast */
    #tip{
      position:fixed;
      left:50%;
      bottom:18px;
      transform:translateX(-50%);
      z-index:80;
      display:none;
      width:min(920px,92vw);
      padding:12px 12px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.14);
      background:
        linear-gradient(180deg, rgba(255,255,255,.08), rgba(0,0,0,.18));
      backdrop-filter: blur(14px);
      box-shadow: 0 22px 60px rgba(0,0,0,.45);
      align-items:center;
      gap:12px;
    }
    .tipIcon{
      width:42px;height:42px;border-radius:14px;
      display:grid;place-items:center;
      background: linear-gradient(180deg, rgba(0,200,255,.22), rgba(255,92,0,.18));
      border:1px solid rgba(255,255,255,.16);
      flex:0 0 auto;
    }
    .tipIcon i{color:#eaf8ff}
    .tipBody{min-width:0}
    .tipTitle{
      font-family:Orbitron, Inter, system-ui;
      font-weight:1000;
      letter-spacing:.10em;
      text-transform:uppercase;
      font-size:12px;
      color:rgba(233,237,245,.95);
    }
    .tipText{
      margin-top:4px;
      font-size:13px;
      color:rgba(233,237,245,.88);
      line-height:1.35;
    }
    .tipMeta{
      margin-top:6px;
      font-size:11px;
      color:rgba(154,163,178,.95);
      font-weight:800;
    }
    .tipClose{
      margin-left:auto;
      width:36px;height:36px;border-radius:14px;
      display:grid;place-items:center;
      cursor:pointer;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: rgba(233,237,245,.9);
      flex:0 0 auto;
    }
    .tipClose:hover{ background: rgba(255,255,255,.10); }

    /* Admin */
    .adminFab{
      position:fixed;right:16px;bottom:16px;z-index:90;
      display:flex;flex-direction:column;gap:10px;align-items:flex-end;
    }
    .fabBtn{
      border-radius:999px;
      padding:12px 14px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.05);
      color:var(--text);
      text-decoration:none;
      font-weight:900;
      display:inline-flex;gap:10px;align-items:center;
      cursor:pointer;
    }
    .fabBtn:hover{background:rgba(255,255,255,.09)}
    .fabBtn.primary{
      background:linear-gradient(90deg,var(--blue),#3bd9ff);
      color:#041018;border-color:rgba(255,255,255,.14);
      box-shadow:0 16px 45px rgba(0,200,255,.20);
    }

    .modal{
      position:fixed;inset:0;z-index:100;
      background:rgba(0,0,0,.75);
      display:none;
      align-items:center;justify-content:center;
      padding:18px;
    }
    .modal.show{display:flex}

    /* ✅ SCROLL FIX: modal/panel with internal scroll */
    .panel{
      width:min(980px,96vw);
      border-radius:22px;
      border:1px solid rgba(255,255,255,.10);
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(0,0,0,.55));
      box-shadow:var(--shadow);
      overflow:hidden;

      max-height: calc(100vh - 36px);
      display:flex;
      flex-direction:column;
    }
    .panelHead{
      padding:14px 14px;
      border-bottom:1px solid var(--line);
      display:flex;align-items:center;justify-content:space-between;gap:10px;
      flex:0 0 auto;
    }
    .panelHead h3{margin:0;font-size:14px;letter-spacing:.12em;text-transform:uppercase}
    .close{cursor:pointer;border:1px solid var(--line);background:rgba(255,255,255,.03);color:var(--text);
      border-radius:14px;padding:10px 12px;font-weight:900}
    .panelBody{
      padding:14px;
      overflow:auto;
      -webkit-overflow-scrolling: touch;
      flex: 1 1 auto;
      min-height: 0;
    }

    .adminGrid{display:grid;grid-template-columns:1fr 1.2fr;gap:12px}
    .box{
      border:1px solid var(--line);
      border-radius:18px;
      background:rgba(255,255,255,.02);
      padding:12px;
    }
    .box h4{margin:0 0 10px;font-size:13px;letter-spacing:.08em;text-transform:uppercase;color:rgba(233,237,245,.85)}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .row3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px}
    .mut{color:var(--muted);font-size:12px}
    .btnWide{
      width:100%;
      padding:12px 14px;border-radius:14px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.05);
      color:var(--text);
      font-weight:900;cursor:pointer;
    }
    .btnWide:hover{background:rgba(255,255,255,.08)}
    .btnWide.orange{background:rgba(255,92,0,.18);border-color:rgba(255,92,0,.28)}
    .btnWide.orange:hover{background:rgba(255,92,0,.24)}
    .btnWide.green{background:rgba(34,197,94,.18);border-color:rgba(34,197,94,.28)}
    .btnWide.green:hover{background:rgba(34,197,94,.24)}

    /* Invoice preview (improved design) */
    .invoicePreview{
      background:#ffffff;
      color:#0b1220;
      border-radius:18px;
      border:1px solid rgba(0,0,0,.10);
      overflow:hidden;
      box-shadow: 0 14px 40px rgba(0,0,0,.10);
    }

    .invHeaderBar{
      background: linear-gradient(90deg, #00c8ff, #ff5c00);
      color: #061018;
      padding: 12px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      -webkit-print-color-adjust: exact;
      print-color-adjust: exact;
    }
    .invHeaderBar .title{
      font-weight:1000;
      letter-spacing:.12em;
      text-transform:uppercase;
      font-family: Orbitron, Inter, system-ui;
      font-size: 12px;
    }
    .invHeaderBar .chip{
      background: rgba(255,255,255,.20);
      border: 1px solid rgba(255,255,255,.25);
      padding: 8px 10px;
      border-radius: 999px;
      font-weight: 900;
      font-size: 12px;
      white-space: nowrap;
    }

    .invTop{
      display:flex;justify-content:space-between;gap:10px;align-items:flex-start;
      padding:14px;
      border-bottom:1px solid rgba(0,0,0,.10);
      background:
        radial-gradient(900px 300px at 10% 0%, rgba(0,200,255,.10), transparent 60%),
        radial-gradient(900px 300px at 90% 0%, rgba(255,92,0,.10), transparent 60%),
        #fff;
      -webkit-print-color-adjust: exact;
      print-color-adjust: exact;
    }
    .invBrand{display:flex;gap:12px;align-items:center}
    .invBrand img{
      height:50px;
      border-radius:12px;
      border: 1px solid rgba(0,0,0,.08);
      background:#fff;
      object-fit:cover;
    }
    .invBrand .t1{font-weight:1000;letter-spacing:.06em}
    .invBrand .t2{font-size:12px;color:#334155;margin-top:2px}
    .invMeta{font-size:12px;color:#0f172a;text-align:right}
    .invMeta b{display:block;font-size:12px}
    .invPad{padding:14px}

    table{width:100%;border-collapse:collapse}
    th,td{padding:10px;border-bottom:1px solid rgba(0,0,0,.08);font-size:12px}
    th{
      text-align:left;
      background: linear-gradient(180deg, #f8fafc, #f1f5f9);
      color:#0f172a;
      font-weight: 900;
      -webkit-print-color-adjust: exact;
      print-color-adjust: exact;
    }
    td.r{text-align:right}

    .btnRemove{
      border:1px solid rgba(15, 23, 42, .12);
      background:#fff;
      border-radius:12px;
      padding:7px 10px;
      cursor:pointer;
      font-weight:900;
      color:#0f172a;
    }
    .btnRemove:hover{ background:#f8fafc; }
    .btnRemove:active{ transform: scale(.98); }

    .invCards{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
      margin-bottom:10px;
    }
    .invCard{
      border:1px solid rgba(0,0,0,.10);
      border-radius:14px;
      padding:12px;
      background:#fff;
    }
    .invCard .h{
      font-weight:1000;
      margin-bottom:6px;
      display:flex;
      gap:8px;
      align-items:center;
      color:#0f172a;
    }
    .invCard .h i{ color:#ff5c00; }
    .invCard .l{ font-size:12px; color:#334155; line-height:1.45; }
    .invCard .l b{ color:#0f172a; }

    .totals{
      display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;
      padding:14px;
      border-top:1px solid rgba(0,0,0,.10);
      background: #fafafa;
      -webkit-print-color-adjust: exact;
      print-color-adjust: exact;
    }
    .totals .boxT{
      border:1px solid rgba(0,0,0,.10);
      border-radius:14px;
      padding:12px;
      background: #fff;
    }
    .totals .boxT .k{font-size:12px;color:#334155;font-weight:900}
    .totals .boxT .v{font-size:16px;font-weight:1000;margin-top:6px;color:#0f172a}
    .totals .boxT.primary{
      background: linear-gradient(180deg, rgba(0,200,255,.12), rgba(255,92,0,.10));
      border-color: rgba(255,92,0,.18);
      -webkit-print-color-adjust: exact;
      print-color-adjust: exact;
    }

    /* Sello / firma */
    .stampSign{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      padding: 0 14px 14px;
      background:#fafafa;
      -webkit-print-color-adjust: exact;
      print-color-adjust: exact;
    }
    .stampBox{
      border: 2px dashed rgba(15, 23, 42, .20);
      border-radius: 16px;
      min-height: 92px;
      background: #fff;
      padding: 10px;
      position: relative;
    }
    .stampBox .t{
      font-weight:1000;
      font-size:12px;
      color:#0f172a;
      margin-bottom:6px;
      letter-spacing:.08em;
      text-transform:uppercase;
    }
    .stampBox .hint{
      font-size:11px;color:#64748b;
    }
    .stampLine{
      position:absolute;
      left:10px; right:10px; bottom:12px;
      height:1px;
      background: rgba(15, 23, 42, .20);
    }
    .stampSigLbl{
      position:absolute;
      left:10px; right:10px; bottom:0;
      transform: translateY(8px);
      font-size:10px;
      color:#64748b;
      text-align:center;
      font-weight:900;
      letter-spacing:.08em;
      text-transform:uppercase;
    }

    .invFoot{
      padding:12px 14px;
      color:#475569;
      font-size:11px;
      border-top:1px solid rgba(0,0,0,.10);
      background:#f8fafc;
      -webkit-print-color-adjust: exact;
      print-color-adjust: exact;
    }

    /* ✅ PRINT: only invoice */
    @page{
      size: A4;
      margin: 12mm;
    }
    @media print{
      /* Ocultar todo */
      body *{ visibility: hidden !important; }

      /* Mostrar solo la factura */
      #invoicePreview, #invoicePreview *{
        visibility: visible !important;
      }

      /* Posicionar factura para que sea lo único */
      #invoicePreview{
        position: fixed;
        left: 0;
        top: 0;
        width: 100%;
        border:none !important;
        border-radius:0 !important;
        box-shadow:none !important;
      }

      /* Ocultar acciones */
      .btnRemove{display:none !important;}
    }

    /* Responsive */
    @media (max-width:1050px){
      .cards{grid-template-columns:repeat(2,1fr)}
      .features{grid-template-columns:repeat(2,1fr)}
      .testGrid{grid-template-columns:1fr}
      .footGrid{grid-template-columns:1fr}
      .heroGrid{grid-template-columns:1fr}
      .formGrid{grid-template-columns:1fr 1fr}
      .adminGrid{grid-template-columns:1fr}
      .invCards{grid-template-columns: 1fr;}
      .totals{grid-template-columns: 1fr;}
      .stampSign{grid-template-columns:1fr}
    }
    @media (max-width:560px){
      .formGrid{grid-template-columns:1fr}
      .links{display:none}
      .brand{min-width:auto}
      .heroCard{padding:42px 16px}
    }
  /* ===== PRO: Comparativa y Secciones (fix visual) ===== */
.compare{
  border:1px solid rgba(255,255,255,.10);
  border-radius:24px;
  overflow:hidden;
  background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(0,0,0,.25));
  box-shadow: 0 18px 50px rgba(0,0,0,.35);
}

.compareRow{
  display:grid;
  grid-template-columns: 1.35fr 1fr 1fr 1fr;
  align-items:stretch;
}

.compareRow > div{
  padding:14px 14px;
  border-bottom:1px solid rgba(255,255,255,.08);
  border-right:1px solid rgba(255,255,255,.06);
}

.compareRow > div:last-child{ border-right:none; }

.compareRow.head > div{
  background: rgba(255,255,255,.06);
  font-weight:1000;
  letter-spacing:.12em;
  text-transform:uppercase;
  font-size:12px;
  color: rgba(233,237,245,.92);
}

.compareRow .k{
  font-weight:1000;
  color: rgba(233,237,245,.95);
}

.compareRow .v{
  color: rgba(233,237,245,.82);
  font-size:13px;
  line-height:1.35;
}

.compareRow .best{
  background: linear-gradient(180deg, rgba(0,200,255,.14), rgba(255,92,0,.10));
  font-weight:1000;
}

.compareRow.head .best{
  color:#061018;
  background: linear-gradient(90deg, #00c8ff, #ff5c00);
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
}

/* Cards de info más “marca” */
.infoCard, .step, .policyCard{
  background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(0,0,0,.22)) !important;
  border-color: rgba(255,255,255,.10) !important;
  box-shadow: 0 14px 40px rgba(0,0,0,.28);
}

/* Ajuste tipográfico para que no se vea “pegado” */
.infoCard .h, .policyCard .h{
  font-size:12px;
}
.steps .step .d, .policyCard .li, .infoCard .li{
  color: rgba(233,237,245,.82);
}

/* Responsive: comparativa en móvil se vuelve "cards" */
@media (max-width: 720px){
  .compareRow{
    grid-template-columns: 1fr;
  }
  .compareRow.head{ display:none; }

  .compareRow{
    border-bottom:1px solid rgba(255,255,255,.08);
  }
  .compareRow > div{
    border-right:none;
    border-bottom: none;
    padding:10px 14px;
  }

  .compareRow > div.k{
    padding-top:14px;
    font-size:14px;
  }

  /* Convertimos cada fila en una card */
  .compareRow{
    background: rgba(0,0,0,.18);
  }
  .compareRow > div:nth-child(2)::before{ content:"Halógeno: "; font-weight:1000; color:rgba(233,237,245,.92); }
  .compareRow > div:nth-child(3)::before{ content:"LED genérico: "; font-weight:1000; color:rgba(233,237,245,.92); }
  .compareRow > div:nth-child(4)::before{ content:"BRUTALUX: "; font-weight:1000; color:rgba(233,237,245,.92); }

  .compareRow > div:nth-child(4){
    border-top:1px solid rgba(255,255,255,.08);
  }
}
  /* ===== BRUTALUX MODALS: más color + mejor contraste ===== */

/* Fondo del overlay más pro */
.modal.show{
  background:
    radial-gradient(900px 520px at 20% 10%, rgba(0,200,255,.18), transparent 55%),
    radial-gradient(900px 520px at 80% 10%, rgba(255,92,0,.16), transparent 55%),
    rgba(0,0,0,.78);
}

/* Panel con borde neón suave */
.panel{
  border: 1px solid rgba(255,255,255,.12);
  box-shadow:
    0 22px 70px rgba(0,0,0,.65),
    0 0 0 1px rgba(0,200,255,.10) inset;
}

/* Barra superior del modal (título) con gradiente de marca */
.panelHead{
  background:
    linear-gradient(90deg, rgba(0,200,255,.18), rgba(255,92,0,.14));
  border-bottom: 1px solid rgba(255,255,255,.12);
}

/* Título del modal más visible */
.panelHead h3{
  color: rgba(233,237,245,.98);
  text-shadow: 0 0 18px rgba(0,200,255,.22);
}

/* Botón cerrar más “premium” */
.close{
  border-color: rgba(255,255,255,.18) !important;
  background: rgba(0,0,0,.22) !important;
}
.close:hover{
  border-color: rgba(0,200,255,.35) !important;
  box-shadow: 0 0 0 4px rgba(0,200,255,.10);
}

/* Inputs dentro de modales: borde azul al focus */
.panelBody input,
.panelBody select{
  background: rgba(0,0,0,.40) !important;
  border-color: rgba(255,255,255,.12) !important;
}
.panelBody input:focus,
.panelBody select:focus{
  border-color: rgba(0,200,255,.40) !important;
  box-shadow: 0 0 0 4px rgba(0,200,255,.14) !important;
}

/* Labels un poquito más claros */
.panelBody label{
  color: rgba(233,237,245,.78) !important;
}

/* Tarjetas box dentro del modal: más relieve */
.panelBody .box{
  background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(0,0,0,.28)) !important;
  border-color: rgba(255,255,255,.10) !important;
  box-shadow: 0 12px 40px rgba(0,0,0,.35);
}

/* Píldoras (subtotal/tasa) con estilo marca */
.panelBody .pill{
  background:
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,.18)) !important;
  border-color: rgba(255,255,255,.14) !important;
}
.panelBody .pill b{
  background: linear-gradient(90deg, var(--yellow), #ffd36b);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent !important;
}

/* Items del carrito */
.cartItem{
  border-color: rgba(255,255,255,.12) !important;
  background:
    radial-gradient(700px 240px at 20% 0%, rgba(0,200,255,.10), transparent 60%),
    rgba(0,0,0,.30) !important;
}
.cartQty{
  border-color: rgba(255,255,255,.14) !important;
}
.cartQty:focus{
  border-color: rgba(255,92,0,.40) !important;
  box-shadow: 0 0 0 4px rgba(255,92,0,.12) !important;
}

/* Botón “Quitar” en carrito: que no se vea plano */
.btnRemove{
  border-color: rgba(255,255,255,.18) !important;
  background: rgba(255,255,255,.92) !important;
}
.btnRemove:hover{
  filter: brightness(1.03);
}

/* Botones del modal (Vaciar / Enviar) más marcados */
#cartClear.btnWide{
  background: rgba(255,92,0,.14) !important;
  border-color: rgba(255,92,0,.22) !important;
}
#cartClear.btnWide:hover{
  background: rgba(255,92,0,.20) !important;
}

#cartWhatsapp.btnWide.green{
  background: linear-gradient(90deg, #22c55e, #16a34a) !important;
  border-color: rgba(255,255,255,.16) !important;
  box-shadow: 0 18px 45px rgba(34,197,94,.22);
}

/* Botón carrito del header más “marca” */
.cta-cart{
  background:
    linear-gradient(180deg, rgba(255,255,255,.08), rgba(0,0,0,.10)) !important;
  border-color: rgba(0,200,255,.22) !important;
  box-shadow: 0 10px 30px rgba(0,200,255,.10);
}
.cta-cart:hover{
  border-color: rgba(255,92,0,.26) !important;
  box-shadow: 0 0 0 4px rgba(255,92,0,.10), 0 12px 35px rgba(0,0,0,.35);
}

/* Detalle: números y totales más legibles */
#cartSubUsd, #cartSubBs, #cartRate{
  font-weight: 1000;
}
  /* ===== CEO SECTION ===== */
.ceoCard{
  border:1px solid rgba(255,255,255,.10);
  border-radius:26px;
  background:
    radial-gradient(900px 360px at 20% 0%, rgba(0,200,255,.12), transparent 60%),
    radial-gradient(900px 360px at 80% 0%, rgba(255,92,0,.10), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.04), rgba(0,0,0,.30));
  box-shadow: 0 18px 55px rgba(0,0,0,.45);
  padding:16px;
  display:grid;
  grid-template-columns: .9fr 1.1fr;
  gap:14px;
}

.ceoLeft{
  display:flex;
  gap:12px;
  align-items:center;
  padding:14px;
  border-radius:22px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.22);
}

.ceoAvatar{
  width:64px;height:64px;border-radius:22px;
  display:grid;place-items:center;
  background: linear-gradient(90deg, rgba(0,200,255,.20), rgba(255,92,0,.18));
  border:1px solid rgba(255,255,255,.14);
  box-shadow: 0 14px 40px rgba(0,0,0,.35);
  font-size:22px;
  color: rgba(233,237,245,.95);
}

.ceoName{
  font-weight:1000;
  letter-spacing:.06em;
  text-transform:uppercase;
}

.ceoRole{
  margin-top:4px;
  color: rgba(233,237,245,.75);
  font-weight:900;
  font-size:12px;
  letter-spacing:.10em;
  text-transform:uppercase;
}

.ceoLoc{
  margin-top:8px;
  color: rgba(233,237,245,.70);
  font-size:13px;
  display:flex;
  gap:8px;
  align-items:center;
}
.ceoLoc i{ color: var(--yellow); }

.ceoRight{
  padding:14px;
  border-radius:22px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.16);
}

.ceoText{
  margin:0;
  color: rgba(233,237,245,.86);
  line-height:1.5;
  font-size:14px;
}

.ceoBadges{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  margin-top:12px;
}

.ceoBadge{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:8px 10px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.04);
  font-weight:1000;
  font-size:12px;
}
.ceoBadge i{ color: var(--blue); }

.ceoBtns{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:10px;
  margin-top:12px;
}

@media (max-width: 900px){
  .ceoCard{ grid-template-columns: 1fr; }
  .ceoBtns{ grid-template-columns: 1fr; }
}
  /* CEO avatar photo (premium) */
.ceoAvatar{
  width:74px;
  height:74px;
  border-radius:24px;
  overflow:hidden;
  flex:0 0 auto;

  background: linear-gradient(90deg, rgba(0,200,255,.22), rgba(255,92,0,.18));
  border:1px solid rgba(255,255,255,.16);
  box-shadow:
    0 18px 55px rgba(0,0,0,.45),
    0 0 0 1px rgba(0,200,255,.14) inset;
  padding:3px; /* marco */
}

.ceoAvatar img{
  width:100%;
  height:100%;
  object-fit:cover;
  border-radius:20px; /* un poco menos que el contenedor por el marco */
  display:block;
  background:#0b0d14;
}

/* opcional: que en móvil no se vea enorme */
@media (max-width: 560px){
  .ceoAvatar{ width:66px; height:66px; border-radius:22px; }
  .ceoAvatar img{ border-radius:18px; }
}
  /* CEO avatar bigger */
.ceoAvatar{
  width: 104px;
  height: 104px;
  border-radius: 28px;
  padding: 4px; /* marco un poco más grueso */
}

.ceoAvatar img{
  border-radius: 24px;
}

/* móvil */
@media (max-width: 560px){
  .ceoAvatar{
    width: 92px;
    height: 92px;
    border-radius: 26px;
  }
  .ceoAvatar img{
    border-radius: 22px;
  }
}
  /* ===== FIX capas: etiquetas sobre la imagen ===== */
.card .img img{
  position: relative;
  z-index: 1;
  display:block;
}

.tagTop{
  position: absolute;
  z-index: 5;
}
  /* ===== Stickers: MÁS VENDIDO / HOT ===== */
.sticker{
  position:absolute;
  top:12px;
  right:12px;
  z-index:6;
  pointer-events:none;

  display:inline-flex;
  align-items:center;
  gap:8px;

  padding:10px 14px;
  border-radius:999px;

  font-weight:1000;
  font-size:12px;
  letter-spacing:.12em;
  text-transform:uppercase;

  border:1px solid rgba(255,255,255,.22);
  color:#140700;

  box-shadow:
    0 16px 40px rgba(0,0,0,.45),
    0 0 0 1px rgba(255,255,255,.10) inset;
}

/* MÁS VENDIDO: dorado + brillo */
.sticker.best{
  background: linear-gradient(90deg, #ffd36b, #ff7a00);
  overflow:hidden;
}

.sticker.best::after{
  content:"";
  position:absolute;
  inset:-60%;
  background: linear-gradient(120deg, transparent 40%, rgba(255,255,255,.95) 50%, transparent 60%);
  transform: translateX(-80%) rotate(10deg);
  animation: bestShine 1.6s ease-in-out infinite;
  opacity:.7;
}

@keyframes bestShine{
  0%{ transform: translateX(-80%) rotate(10deg); opacity:0; }
  20%{ opacity:.95; }
  100%{ transform: translateX(80%) rotate(10deg); opacity:0; }
}

/* HOT: rojo/naranja + llamita animada */
.sticker.hot{
  background: linear-gradient(90deg, #ff2d55, #ff8a00);
}

.sticker .flame{
  display:inline-block;
  animation: flameFlicker .55s ease-in-out infinite;
  transform-origin: 50% 80%;
}

@keyframes flameFlicker{
  0%,100%{ transform: rotate(-6deg) scale(1); }
  50%{ transform: rotate(8deg) scale(1.15); }
}
  </style>
</head>

<body>
  <!-- HEADER -->
  <header>
    <div class="container">
      <div class="nav">
        <div class="brand">
          <img src="https://i.postimg.cc/dVXHwFxJ/Whats-App-Image-2026-02-03-at-9-11-46-PM.jpg" alt="BRUTALUX logo">
          <div>
            <div class="orbitron" style="font-weight:900;letter-spacing:.10em;text-transform:uppercase">
              BRUTA<span style="color:var(--orange)">LUX</span>
            </div>
            <div class="tag">Potentes y resistentes • 5 años de garantía</div>
          </div>
        </div>

        <div class="links">
          <a href="#catalogo">Catálogo</a>
          <a href="#compat">Compatibilidad</a>
          <a href="#testimonios">Opiniones</a>
          <a href="#faq">FAQ</a>
          <a href="#contacto">Contacto</a>
        </div>

        <div style="display:flex;gap:10px;align-items:center">
          <div class="pill">Tasa EURO BCV: <b id="rateHeader">—</b></div>
          <a class="cta-wa" href="https://wa.me/584126835635" target="_blank" rel="noopener">
            <i class="fa-brands fa-whatsapp"></i> WhatsApp
          </a>
          <button class="cta-cart" id="openCart" type="button" title="Ver carrito">
  <i class="fa-solid fa-cart-shopping"></i>
  <span>Carrito</span>
  <b id="cartCount">0</b>
</button>
        </div>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <div class="hero">
    <div class="container">
      <div class="heroCard">
        <div class="heroGrid">
          <div>
            <h1 class="orbitron">Serie R <span class="grad">BRUTALUX</span></h1>
            <p>
              En <b>BRUTALUX LIGHTING</b> somos la <b>marca</b> detrás de nuestras luces LED: rendimiento real, calidad constante y soporte directo.
  Ofrecemos iluminación para <b>todo tipo de vehículo</b>, con modelos diseñados para darte <b>más alcance</b>, <b>mejor corte</b> y
  <b>mayor durabilidad</b> en el uso diario y en carretera.
  <br><br>
  Compra con confianza: aquí adquieres <b>BRUTALUX original</b> (venta y atención oficial), con <b>asesoría personalizada</b> para elegir el socket correcto
  (bajas/altas/neblina) y recomendaciones de instalación para que el haz quede perfecto.
  <br><br>
  <b style="color:var(--yellow)">Garantía: 5 años</b> • Respaldo postventa • Envíos a nivel nacional.
</p>
            <div class="heroBtns">
              <a class="btn btnPrimary orbitron" href="#catalogo"><i class="fa-solid fa-bolt"></i> Ver catálogo</a>
              <a class="btn orbitron" href="#compat"><i class="fa-solid fa-car"></i> ¿Qué luz usa mi auto?</a>
              <a class="btn orbitron" href="#facturar"><i class="fa-solid fa-file-invoice"></i> Facturar venta</a>
            </div>
          </div>

          <div class="heroStats">
            <div class="statGrid">
              <div class="stat">
                <div class="k orbitron" style="color:var(--blue)">+Visibilidad</div>
                <div class="s">Mejor proyección en carretera</div>
              </div>
              <div class="stat">
                <div class="k orbitron" style="color:var(--orange)">-Consumo</div>
                <div class="s">Más eficiente que halógeno</div>
              </div>
              <div class="stat">
                <div class="k orbitron" style="color:var(--green)">Encendido</div>
                <div class="s">Instantáneo, sin demora</div>
              </div>
              <div class="stat">
                <div class="k orbitron" style="color:var(--yellow)">5 años</div>
                <div class="s">Garantía Brutalux</div>
              </div>
            </div>
            <div class="badges">
              <span class="badge bBlue"><i class="fa-solid fa-circle-check"></i> Plug &amp; Play</span>
              <span class="badge bOrange"><i class="fa-solid fa-shield-halved"></i> Corte correcto</span>
              <span class="badge bGreen"><i class="fa-solid fa-droplet"></i> Resistencia</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- FEATURE STRIP -->
  <section>
    <div class="container">
      <div class="features">
        <div class="feature">
          <i class="fa-solid fa-eye"></i>
          <div>
            <div class="t orbitron">Más alcance</div>
            <div class="d">Mejor visibilidad y reacción.</div>
          </div>
        </div>
        <div class="feature">
          <i class="fa-solid fa-car-battery"></i>
          <div>
            <div class="t orbitron">Menos consumo</div>
            <div class="d">Cuida batería y alternador.</div>
          </div>
        </div>
        <div class="feature">
          <i class="fa-solid fa-temperature-low"></i>
          <div>
            <div class="t orbitron">Disipación</div>
            <div class="d">Diseño pensado para durar.</div>
          </div>
        </div>
        <div class="feature">
          <i class="fa-solid fa-award"></i>
          <div>
            <div class="t orbitron">Garantía 5 años</div>
            <div class="d">Respaldo real Brutalux.</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CATALOGO -->
  <section id="catalogo">
    <div class="container">
      <div class="sectionTitle">
        <div>
          <h2 class="orbitron">Catálogo Brutalux</h2>
          <p>Precios en EUR y referencia en Bs según BCV.</p>
        </div>
        <div class="pill">Tasa EURO BCV: <b id="rateBadge">—</b></div>
      </div>

      <div class="cards" id="productCards"></div>

      <p class="tiny" style="margin-top:12px">
        Nota: Si necesitas otro tipo de bombillo (H1, H7, H11, HB3, HB4, etc.), escríbenos por WhatsApp y lo cotizamos.
      </p>
    </div>
  </section>
  <!-- PEDIDO RAPIDO / CARRITO (se muestra en modal) -->
<!-- (El modal va al final del body) -->

<!-- COMPARATIVA -->
<section id="comparativa">
  <div class="container">
    <div class="sectionTitle">
      <div>
        <h2 class="orbitron">¿Por qué BRUTALUX?</h2>
        <p>Comparativa clara para tomar una decisión rápida.</p>
      </div>
    </div>

    <div class="compare">
      <div class="compareRow head">
        <div></div>
        <div>Halógeno</div>
        <div>LED genérico</div>
        <div class="best">BRUTALUX</div>
      </div>

      <div class="compareRow">
        <div class="k">Visibilidad</div>
        <div class="v">Básica</div>
        <div class="v">Variable</div>
        <div class="v best">Alta y pareja*</div>
      </div>

      <div class="compareRow">
        <div class="k">Corte / no encandila</div>
        <div class="v">Depende del faro</div>
        <div class="v">Muchas veces irregular</div>
        <div class="v best">Enfocado (bien instalado)</div>
      </div>

      <div class="compareRow">
        <div class="k">Durabilidad</div>
        <div class="v">Media</div>
        <div class="v">Variable</div>
        <div class="v best">Alta (5 años garantía)</div>
      </div>

      <div class="compareRow">
        <div class="k">Consumo</div>
        <div class="v">Más alto</div>
        <div class="v">Más bajo</div>
        <div class="v best">Optimizado</div>
      </div>

      <div class="compareRow">
        <div class="k">Soporte</div>
        <div class="v">—</div>
        <div class="v">Limitado</div>
        <div class="v best">Asesoría + postventa</div>
      </div>

      <p class="tiny" style="margin:10px 0 0">
        *Resultados dependen del faro y de una instalación correcta. Si tu versión varía, te pedimos foto del socket.
      </p>
    </div>
  </div>
</section>

<!-- PAGOS / ENVIOS -->
<section id="pagos-envios">
  <div class="container">
    <div class="sectionTitle">
      <div>
        <h2 class="orbitron">Pagos y envíos</h2>
        <p>Información rápida para cerrar la compra.</p>
      </div>
    </div>

    <div class="infoGrid">
      <div class="infoCard">
        <div class="h orbitron"><i class="fa-solid fa-credit-card"></i> Métodos de pago</div>
        <ul class="li">
          <li>Pago móvil</li>
          <li>Zelle</li>
          <li>Binance / USDT</li>
          <li>Efectivo (según coordinación)</li>
        </ul>
      </div>

      <div class="infoCard">
        <div class="h orbitron"><i class="fa-solid fa-truck-fast"></i> Envíos</div>
        <ul class="li">
          <li>Envíos nacionales (MRW / Zoom / Tealca)</li>
          <li>Entrega el mismo día (si aplica)</li>
          <li>Embalaje seguro</li>
        </ul>
      </div>

      <div class="infoCard">
        <div class="h orbitron"><i class="fa-solid fa-clock"></i> Horario</div>
        <ul class="li">
          <li>Lun–Sáb: 9:00am – 7:00pm</li>
          <li>Dom: previo acuerdo</li>
        </ul>
      </div>
    </div>
  </div>
</section>

<!-- GUIA -->
<section id="instalacion">
  <div class="container">
    <div class="sectionTitle">
      <div>
        <h2 class="orbitron">Guía rápida de instalación</h2>
        <p>Evita errores comunes y aprovecha el rendimiento.</p>
      </div>
    </div>

    <div class="steps">
      <div class="step">
        <div class="n">1</div>
        <div>
          <div class="t orbitron">Verifica el socket</div>
          <div class="d">Antes de instalar, confirma tipo de bombillo (baja/alta/neblina).</div>
        </div>
      </div>
      <div class="step">
        <div class="n">2</div>
        <div>
          <div class="t orbitron">Posición correcta del chip</div>
          <div class="d">El chip debe quedar alineado como el filamento del halógeno para un buen corte.</div>
        </div>
      </div>
      <div class="step">
        <div class="n">3</div>
        <div>
          <div class="t orbitron">Prueba y ajusta el faro</div>
          <div class="d">Ajusta altura del faro para no encandilar y maximizar alcance.</div>
        </div>
      </div>
      <div class="step">
        <div class="n">4</div>
        <div>
          <div class="t orbitron">Si parpadea</div>
          <div class="d">Puede requerir decoder/Canbus. Escríbenos con modelo/año y video.</div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- GARANTIA -->
<section id="garantia">
  <div class="container">
    <div class="sectionTitle">
      <div>
        <h2 class="orbitron">Garantía BRUTALUX</h2>
        <p>Condiciones claras para tu tranquilidad.</p>
      </div>
    </div>

    <div class="policy">
      <div class="policyCard">
        <div class="h orbitron"><i class="fa-solid fa-shield-halved"></i> ¿Qué cubre?</div>
        <ul class="li">
          <li>Fallas de fabricación (encendido, drivers, desempeño anormal).</li>
          <li>Reemplazo según evaluación y condiciones.</li>
        </ul>
      </div>
      <div class="policyCard">
        <div class="h orbitron"><i class="fa-solid fa-triangle-exclamation"></i> ¿Qué no cubre?</div>
        <ul class="li">
          <li>Instalación incorrecta, golpes, humedad por faro abierto.</li>
          <li>Daños por corto eléctrico o modificaciones.</li>
        </ul>
      </div>
      <div class="policyCard">
        <div class="h orbitron"><i class="fa-solid fa-receipt"></i> Requisitos</div>
        <ul class="li">
          <li>Factura/nota de venta.</li>
          <li>Foto/video de la falla + instalación.</li>
        </ul>
      </div>
      
    </div>
  </div>
</section>

  <!-- COMPATIBILIDAD -->
  <section id="compat">
    <div class="container">
      <div class="sectionTitle">
        <div>
          <h2 class="orbitron">¿Qué luz LED usa mi auto?</h2>
          <p>Selecciona marca, modelo y año. Te mostramos el socket y una recomendación.</p>
        </div>
      </div>

      <div class="compatBox">
        <div class="formGrid">
          <div>
            <label>Marca</label>
            <select id="cBrand">
              <option value="">Selecciona</option>
              <option value="Toyota">Toyota</option>
              <option value="Ford">Ford</option>
              <option value="Chevrolet">Chevrolet</option>
            </select>
          </div>
          <div>
            <label>Modelo</label>
            <select id="cModel" disabled>
              <option value="">Primero marca</option>
            </select>
          </div>
          <div>
            <label>Año</label>
            <select id="cYear" disabled>
              <option value="">Año</option>
            </select>
          </div>
          <div>
            <button class="btnWide orange orbitron" id="btnCompat"><i class="fa-solid fa-magnifying-glass"></i> Consultar</button>
          </div>
        </div>

        <div class="result" id="compatResult" style="display:none"></div>
        <div class="note">
          Importante: La compatibilidad puede variar por versión/mercado. Si tu resultado no aparece, escríbenos por WhatsApp con una foto del faro y te asesoramos.
        </div>
      </div>
    </div>
  </section>

  <!-- TESTIMONIOS -->
  <section id="testimonios">
    <div class="container">
      <div class="sectionTitle">
        <div>
          <h2 class="orbitron">Opiniones reales</h2>
          <p>Prueba social para que compres con confianza.</p>
        </div>
      </div>

      <div class="testGrid">
        <div class="test">
          <div class="top">
            <div>
              <div class="name">José Q.</div>
              <div class="meta">Toyota Corolla • Miranda</div>
            </div>
            <div class="stars">★★★★★</div>
          </div>
          <p>“Instalé R33 y la diferencia es brutal. Corte limpio y muchísimo alcance en carretera.”</p>
        </div>
        <div class="test">
          <div class="top">
            <div>
              <div class="name">María R.</div>
              <div class="meta">Ford Fiesta • Valencia</div>
            </div>
            <div class="stars">★★★★★</div>
          </div>
          <p>“Con R36 ya no sufro en lluvia. Ilumina parejo y no parpadea.”</p>
        </div>
        <div class="test">
          <div class="top">
            <div>
              <div class="name">Carlos M.</div>
              <div class="meta">Chevrolet Corsa • Caracas</div>
            </div>
            <div class="stars">★★★★★</div>
          </div>
          <p>“Compré R36T por el modo amarillo. En neblina es otra cosa. Recomendados.”</p>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <section id="faq">
    <div class="container">
      <div class="sectionTitle">
        <div>
          <h2 class="orbitron">Preguntas frecuentes</h2>
          <p>Respuestas claras para cerrar ventas más rápido.</p>
        </div>
      </div>

      <details>
        <summary>¿Las luces LED deslumbran?</summary>
        <p>Si el bombillo tiene buen diseño de haz y se instala correctamente, el corte es más limpio que halógeno. Nosotros te asesoramos según tu faro.</p>
      </details>
      <details>
        <summary>¿Qué diferencia hay entre R33, R36, R36T y R20?</summary>
        <p>R33 es la más potente, R36 es alta potencia balanceada, R36T es dual color (blanco/amarillo) y R20 es la opción más económica.</p>
      </details>
      <details>
        <summary>¿Garantía?</summary>
        <p>BRUTALUX ofrece <b>5 años de garantía</b> (según condiciones de uso e instalación). Conserva tu factura.</p>
      </details>
    </div>
  </section>

  <!-- FACTURAR -->
  <section id="facturar">
    <div class="container">
      <div class="sectionTitle">
        <div>
          <h2 class="orbitron">Facturar venta (Admin local)</h2>
          <p>Arma una factura con varios modelos y cantidades. Imprime o guarda como PDF.</p>
        </div>
        <div class="pill">Tip: usa <b>Ctrl+P</b> para guardar PDF</div>
      </div>

      <div class="compatBox">
        <p class="tiny" style="margin:0 0 10px">
          Nota importante: En GitHub Pages (estático) esto se guarda solo en tu navegador (localStorage). Para facturación fiscal real y correlativos oficiales se requiere backend.
        </p>
        <button class="btnWide green orbitron" id="openAdmin">
          <i class="fa-solid fa-lock"></i> Abrir panel Admin / Factura
        </button>
      </div>
    </div>
  </section>

  <!-- CEO / QUIEN ESTA DETRAS -->
<section id="ceo">
  <div class="container">
    <div class="sectionTitle">
      <div>
        <h2 class="orbitron">Quién está detrás</h2>
        <p>Confianza, respaldo y atención directa.</p>
      </div>
    </div>

    <div class="ceoCard">
      <div class="ceoLeft">
        <div class="ceoAvatar">
  <img
    src="https://i.postimg.cc/C5Y93cy9/Gemini_Generated_Image_om2sjjom2sjjom2s.png"
    alt="José Manuel Quintero - CEO BRUTALUX LIGHTING"
    loading="lazy"
  >
</div>
        <div>
          <div class="ceoName orbitron">José Manuel Quintero</div>
          <div class="ceoRole">CEO • BRUTALUX LIGHTING</div>
          <div class="ceoLoc"><i class="fa-solid fa-location-dot"></i> Pueblo Llano, Estado Mérida • Venezuela</div>
        </div>
      </div>

      <div class="ceoRight">
        <p class="ceoText">
          Soy José Manuel Quintero, fundador y CEO de <b>BRUTALUX LIGHTING</b>. Me encargo personalmente de la asesoría
          por compatibilidad, recomendaciones de modelo y soporte postventa. Mi objetivo es que compres con seguridad y
          que la instalación quede perfecta.
        </p>

        <div class="ceoBadges">
          <span class="ceoBadge"><i class="fa-solid fa-circle-check"></i> Asesoría directa</span>
          <span class="ceoBadge"><i class="fa-solid fa-shield-halved"></i> Garantía 5 años</span>
          <span class="ceoBadge"><i class="fa-solid fa-headset"></i> Soporte postventa</span>
        </div>

        <div class="ceoBtns">
          <a class="btnWide green orbitron" target="_blank" rel="noopener"
             href="https://wa.me/584126835635?text=Hola%20Jos%C3%A9%20Manuel%2C%20vengo%20de%20la%20p%C3%A1gina%20BRUTALUX%20y%20quiero%20asesor%C3%ADa.">
            <i class="fa-brands fa-whatsapp"></i> Hablar con el CEO por WhatsApp
          </a>
          <a class="btnWide orbitron" href="#catalogo">
            <i class="fa-solid fa-bolt"></i> Ver catálogo
          </a>
        </div>

        <p class="mut" style="margin:10px 0 0">
          Si necesitas compatibilidad exacta, envíame foto del bombillo o del faro (baja/alta/neblina) y te respondo con la opción correcta.
        </p>
      </div>
    </div>
  </div>
</section>
  <!-- FOOTER -->
  <footer id="contacto">
    <div class="container">
      <div class="footGrid">
        <div>
          <div class="orbitron" style="font-weight:900;letter-spacing:.10em;text-transform:uppercase">
            BRUTA<span style="color:var(--orange)">LUX</span>
          </div>
          <p class="tiny" style="margin:10px 0 0">
            Potentes y resistentes • Garantía 5 años • Venezuela
          </p>
          <div class="social">
            <a href="https://www.instagram.com/bruta_lux?igsh=MXN5ZTg0ZG1uc2k5cw==" target="_blank" rel="noopener" aria-label="Instagram">
              <i class="fa-brands fa-instagram"></i>
            </a>
            <a href="https://www.tiktok.com/@brutaluxlighting?_r=1&_t=ZS-93e9bBF4ckc" target="_blank" rel="noopener" aria-label="TikTok">
              <i class="fa-brands fa-tiktok"></i>
            </a>
            <a href="https://wa.me/584126835635" target="_blank" rel="noopener" aria-label="WhatsApp">
              <i class="fa-brands fa-whatsapp"></i>
            </a>
          </div>
        </div>

        <div>
          <div class="orbitron" style="font-weight:900;letter-spacing:.08em;text-transform:uppercase">Atención</div>
          <p class="tiny" style="margin:10px 0 0">Asesoría por compatibilidad • Envíos nacionales • Soporte postventa</p>
        </div>

        <div>
          <div class="orbitron" style="font-weight:900;letter-spacing:.08em;text-transform:uppercase">Contacto</div>
          <p class="tiny" style="margin:10px 0 0"><b>WhatsApp:</b> +58 412 6835635</p>
          <p class="tiny" style="margin:6px 0 0"><b>Redes:</b> @bruta_lux / @brutaluxlighting</p>
        </div>
      </div>

      <p class="tiny" style="margin-top:18px;opacity:.8">© <span id="yearNow"></span> BRUTALUX. Todos los derechos reservados.</p>
    </div>
  </footer>

  <!-- Professional Tip Toast -->
  <div id="tip" role="status" aria-live="polite">
    <div class="tipIcon"><i class="fa-solid fa-lightbulb"></i></div>
    <div class="tipBody">
      <div class="tipTitle">Consejo Brutalux</div>
      <div class="tipText" id="tipText">—</div>
      <div class="tipMeta" id="tipN">—</div>
    </div>
    <div class="tipClose" id="tipClose" title="Cerrar"><i class="fa-solid fa-xmark"></i></div>
  </div>

  <!-- Admin FAB -->
  <div class="adminFab">
    <button class="fabBtn primary orbitron" id="fabAdmin"><i class="fa-solid fa-user-gear"></i> Admin</button>
  </div>

  <!-- ADMIN MODAL -->
  <div class="modal" id="adminModal" aria-hidden="true">
    <div class="panel">
      <div class="panelHead">
        <h3 class="orbitron">Panel Admin • Tasa • Imágenes • Factura</h3>
        <button class="close orbitron" id="closeAdmin"><i class="fa-solid fa-xmark"></i> Cerrar</button>
      </div>

      <div class="panelBody">
        <div id="loginBox" class="box">
          <h4>Login</h4>
          <div class="row">
            <div>
              <label>Usuario</label>
              <input id="adminUser" placeholder="Usuario">
            </div>
            <div>
              <label>Clave</label>
              <input id="adminPass" type="password" placeholder="Contraseña">
            </div>
          </div>
          <div style="margin-top:10px" class="row">
            <button class="btnWide green orbitron" id="btnLogin"><i class="fa-solid fa-right-to-bracket"></i> Entrar</button>
            <button class="btnWide orbitron" id="btnLogout" style="display:none"><i class="fa-solid fa-right-from-bracket"></i> Salir</button>
          </div>
          <p class="mut" style="margin:10px 0 0">
            Nota: En web estática (GitHub Pages) esto es control local del navegador. Para un admin real en línea se necesita backend.
          </p>
        </div>

        <div id="adminArea" style="display:none">
          <div class="adminGrid">

            <!-- Settings -->
            <div class="box">
              <h4>Configuración del sitio</h4>

              <div class="row">
                <div>
                  <label>Tasa BCV (Bs/EUR)</label>
                  <input id="rateInput" placeholder="Ej: 375,08">
                </div>
                <div>
                  <label>Garantía (texto)</label>
                  <input id="warrantyInput" placeholder="Ej: 5 años">
                </div>
              </div>

              <div style="margin-top:10px" class="row">
                <div>
                  <label>Logo (URL directa)</label>
                  <input id="logoInput" placeholder="https://...jpg">
                </div>
                <div>
                  <label>Fondo portada (URL directa)</label>
                  <input id="heroBgInput" placeholder="https://...jpg">
                </div>
              </div>

              <div style="margin-top:10px" class="row">
                <button class="btnWide orange orbitron" id="btnSaveSettings"><i class="fa-solid fa-floppy-disk"></i> Guardar cambios</button>
                <button class="btnWide orbitron" id="btnResetSettings"><i class="fa-solid fa-rotate-left"></i> Restaurar</button>
              </div>
              <p class="mut" style="margin:10px 0 0">
                Cambios visibles al instante para ti (se guardan en este navegador). Para que lo vean todos en tiempo real hace falta backend.
              </p>
            </div>

            <!-- Invoice builder -->
            <div class="box printOnly">
              <h4>Facturar venta</h4>

              <div class="row">
                <div>
                  <label>Cliente / Razón social</label>
                  <input id="invClient" placeholder="Nombre del cliente">
                </div>
                <div>
                  <label>Cédula / RIF</label>
                  <input id="invId" placeholder="V-12345678 / J-123...">
                </div>
              </div>

              <div style="margin-top:10px" class="row">
                <div>
                  <label>Teléfono</label>
                  <input id="invPhone" placeholder="+58...">
                </div>
                <div>
                  <label>Dirección</label>
                  <input id="invAddr" placeholder="Dirección del cliente">
                </div>
              </div>

              <div style="margin-top:10px" class="row3">
                <div>
                  <label>Producto</label>
                  <select id="invProduct"></select>
                </div>
                <div>
                  <label>Cantidad</label>
                  <input id="invQty" type="number" min="1" value="1">
                </div>
                <div>
                  <label>Precio (USD)</label>
                  <input id="invPrice" type="number" step="0.01" placeholder="Auto">
                </div>
              </div>

              <div style="margin-top:10px" class="row">
                <button class="btnWide green orbitron" id="btnAddItem"><i class="fa-solid fa-plus"></i> Agregar a factura</button>
                <button class="btnWide orbitron" id="btnClearItems"><i class="fa-solid fa-trash"></i> Vaciar</button>
              </div>

              <div style="margin-top:10px" class="row">
                <div>
                  <label>IVA %</label>
                  <input id="invTax" type="number" step="0.01" value="0">
                </div>
                <div>
                  <label>Descuento (USD)</label>
                  <input id="invDiscount" type="number" step="0.01" value="0">
                </div>
              </div>

              <div style="margin-top:10px" class="row">
                <button class="btnWide orange orbitron" id="btnRefreshInvoice"><i class="fa-solid fa-arrows-rotate"></i> Actualizar</button>
                <button class="btnWide green orbitron" id="btnPrint"><i class="fa-solid fa-print"></i> Imprimir / Guardar PDF</button>
              </div>

              <p class="mut" style="margin:10px 0 0">
                Si no abre imprimir: debe ser un clic directo al botón “Imprimir / Guardar PDF”. En algunos móviles el navegador limita impresión.
              </p>
            </div>

          </div>

          <!-- Invoice Preview -->
          <div class="box printOnly" style="margin-top:12px">
            <h4>Vista previa de la factura</h4>
            <div class="invoicePreview" id="invoicePreview"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    /**********************
     * CONFIG / DEFAULTS
     **********************/
    const ADMIN_USER = "Manuel255";
    const ADMIN_PASS = "30158858Jm";
    const WHATSAPP = "584126835635";

    const DEFAULTS = {
      rate: 375.08,
      warranty: "5 años",
      logo: "https://i.postimg.cc/dVXHwFxJ/Whats-App-Image-2026-02-03-at-9-11-46-PM.jpg",
      heroBg: "https://images.unsplash.com/photo-1525609004556-c46c7d6cf023?auto=format&fit=crop&w=2200&q=80"
    };
    // ===== MONEDA BASE (cambiar aquí una sola vez) =====
const BASE_CCY = "EUR";
const BASE_SYMBOL = "€";
const RATE_PAIR_LABEL = "Bs/EUR"; // etiqueta visible

    const PRODUCTS = [
      {
        id: "R36",
        name: "Brutalux R36",
        modelLine: "MODELO R36 · 27.000 LM",
        usd: 80,
        badge: { text: "⚡ R36 · ALTA POTENCIA", cls: "tBlue" },
        image: "https://i.postimg.cc/wxV6w417/Whats_App_Imag_ñe_2026_02_03_at_8_35_01_PM.jpg",
        specs: ["27.000 lm (par)", "6500K blanco puro", "4 tubos de cobre + disipación"],
        waText: "Hola, me interesa la BRUTALUX R36 ($80)."
      },
      {
        id: "R33",
        name: "Brutalux R33",
        modelLine: "MODELO R33 · 33.000 LM",
        usd: 90,
        badge: { text: "👑 R33 · TOP POTENCIA", cls: "tGold" },
        sticker: { type: "best", text: "MÁS VENDIDO" },
        image: "https://i.postimg.cc/SQryg1nn/Whats_App_Image_2026_02_03_at_8_35_01_PM.jpg",
        specs: ["33.000 lm (par)", "6500K blanco puro", "Zinc + 3 tubos de cobre"],
        waText: "Hola, me interesa la BRUTALUX R33 ($90)."
      },
      {
        id: "R36T",
        name: "Brutalux R36T",
        modelLine: "MODELO R36T · 16.000 LM",
        usd: 85,
        badge: { text: "🌓 R36T · BLANCO / AMARILLO", cls: "tPurple" },
        sticker: { type: "hot", text: "HOT" },
        image: "https://i.postimg.cc/3rBKtfkN/Whats_App_Im_age_2026_02_03_at_8_35_01_PM.jpg",
        specs: ["16.000 lm (par)", "3000K–6500K (dual)", "Chip CSP 12 núcleos"],
        waText: "Hola, me interesa la BRUTALUX R36T ($85) dual color."
      },
      {
        id: "R20",
        name: "Brutalux R20",
        modelLine: "MODELO R20 · 20.000 LM",
        usd: 65,
        badge: { text: "👍 R20 · ECONÓMICA", cls: "tGray" },
        image: "https://i.postimg.cc/FFb9wmx0/Whats_App_Image_2026_02_04_at_12_28_05_PM.jpg",
        specs: ["20.000 lm (par)", "12V/24V", "Calidad / precio"],
        waText: "Hola, me interesa la BRUTALUX R20 ($65)."
      },
  // ✅ NUEVOS PRODUCTOS
{
  id: "R35",
  name: "Brutalux R35",
  modelLine: "MODELO R35 · 20.000 LM · 200W",
  usd: 70,
  badge: { text: "⚡ R35 · 200W", cls: "tBlue" },
  image: "https://i.postimg.cc/RZwRJKWN/Diseño_sin_título_(3).png",
  specs: [
    "20.000 lm (par)",
    "6500K blanco",
    "12V",
    "200W",
    "IP68",
    "+50.000 horas de vida útil",
    "Disipación: 2 tubos de cobre + aleta + ventilador silencioso",
    "Canbus / decodificación externa"
  ],
  waText: "Hola, me interesa la BRUTALUX R35 (€70)."
},
{
  id: "R47",
  name: "Brutalux R47",
  modelLine: "MODELO R47 · 24.000 LM · 240W",
  usd: 65,
  badge: { text: "⚡ R47 · 240W", cls: "tBlue" },
  image: "https://i.postimg.cc/FH0Zk3Yz/Diseño_sin_título_(4).png",
  specs: [
    "24.000 lm (par)",
    "6000K blanco",
    "12V",
    "240W",
    "IP68",
    "Cuerpo de aluminio",
    "Canbus / decodificación externa"
  ],
  waText: "Hola, me interesa la BRUTALUX R47 (€65)."
},
{
  id: "R45",
  name: "Brutalux R45",
  modelLine: "MODELO R45 · 20.000 LM · 200W",
  usd: 45,
  badge: { text: "💡 R45 · MEJOR PRECIO", cls: "tGray" },
  image: "https://i.postimg.cc/6pC04n8T/Diseño_sin_título_(5).png",
  specs: [
    "20.000 lm (par)",
    "6500K blanco (menciona variantes 4300K / 3000K)",
    "12V",
    "200W",
    "Chip CSP 4070",
    "IP68",
    "Cuerpo de aluminio",
    "Disipación: 3 tubos de cobre + ventilador silencioso",
    "Canbus / decodificación externa"
  ],
  waText: "Hola, me interesa la BRUTALUX R45 (€45)."
}
    ];

    const TIPS = [
      "Las LED consumen menos energía que las halógenas: más batería y alternador.",
      "El encendido LED es instantáneo: reacción más rápida en carretera.",
      "Mejor temperatura de color = más contraste y visibilidad nocturna.",
      "Un corte de haz correcto reduce el deslumbramiento a otros conductores.",
      "Menos calor en el faro ayuda a cuidar el arnés y el reflector.",
      "Mayor vida útil: menos cambios y menos gastos a largo plazo.",
      "R36T en amarillo mejora visibilidad en niebla y lluvia.",
      "Buena disipación mantiene el rendimiento constante en viajes largos.",
      "Con LED ves más lejos: frenas antes, conduces más seguro.",
      "Ideal para carretera oscura y zonas rurales."
    ];

    /**********************
     * UTILITIES
     **********************/
    const fmtBs = (n) => new Intl.NumberFormat('es-VE', {minimumFractionDigits:2, maximumFractionDigits:2}).format(n);
    const fmtMoney = (n) => new Intl.NumberFormat('en-US', {minimumFractionDigits:2, maximumFractionDigits:2}).format(n);

    function getState(){
      const raw = localStorage.getItem("brutalux_state");
      if(!raw) return {...DEFAULTS};
      try { return {...DEFAULTS, ...JSON.parse(raw)}; } catch { return {...DEFAULTS}; }
    }
    function setState(next){
      localStorage.setItem("brutalux_state", JSON.stringify(next));
    }

    /**********************
     * RENDER CATALOG
     **********************/
    function renderRate(){
      const st = getState();
      document.getElementById("rateHeader").textContent = fmtBs(st.rate);
      document.getElementById("rateBadge").textContent = fmtBs(st.rate);
    }
   
    function renderCatalog(){
  const st = getState();
  const wrap = document.getElementById("productCards");

  wrap.innerHTML = PRODUCTS.map(p=>{
    const bs = p.usd * st.rate;

    return `
      <article class="card" data-pid="${p.id}">
        <div class="img">
  <div class="tagTop ${p.badge.cls}">${p.badge.text}</div>

  ${p.sticker ? `
    <div class="sticker ${p.sticker.type}">
      ${p.sticker.type === "hot" ? `<span class="flame">🔥</span>` : ""}
      <span>${p.sticker.text}</span>
    </div>
  ` : ""}

  <img src="${p.image}" alt="${p.name}" loading="lazy">
</div>

        <div class="body">
          <div class="model orbitron">${p.modelLine}</div>
          <h3 class="name orbitron">${p.name}</h3>

          <ul class="spec">
            ${p.specs.map(s=>`<li><i class="fa-solid fa-bolt"></i> ${s}</li>`).join("")}
            <li><i class="fa-solid fa-shield-halved"></i> Garantía: ${st.warranty}</li>
          </ul>

          <div class="priceRow">
            <div>
              <div class="usd orbitron">€${p.usd}</div>
              <div class="bs">(Bs ${fmtBs(bs)})</div>
            </div>
          </div>

          <div class="actions">
            <a class="btnSmall btnGreen orbitron" target="_blank" rel="noopener"
              href="https://wa.me/${WHATSAPP}?text=${encodeURIComponent(p.waText + ' Tasa BCV: ' + fmtBs(st.rate) + ' Bs/EUR')}">
              <i class="fa-brands fa-whatsapp"></i> Pedir por WhatsApp
            </a>

            <button class="btnSmall orbitron" data-addcart="${p.id}"
              style="background:rgba(0,200,255,.14);border-color:rgba(0,200,255,.24)">
              <i class="fa-solid fa-cart-plus"></i> Agregar
            </button>

            <button class="btnSmall btnOrange orbitron" onclick="openAdminAndPreselect('${p.id}')">
              <i class="fa-solid fa-file-invoice"></i> Facturar
            </button>
          </div>
        </div>
      </article>
    `;
  }).join("");

  document.querySelectorAll('.brand img').forEach(img=>img.src = st.logo);
  document.querySelector('.heroCard').style.backgroundImage =
    `linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.80)), url("${st.heroBg}")`;
}

    /**********************
     * CLICK SOUND (whole page)
     **********************/
    let audioCtx = null;
    function clickSound(){
      try{
        if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        if(audioCtx.state === "suspended") audioCtx.resume();

        const o = audioCtx.createOscillator();
        const g = audioCtx.createGain();
        o.type = "square";
        o.frequency.value = 950;

        g.gain.setValueAtTime(0.0001, audioCtx.currentTime);
        g.gain.exponentialRampToValueAtTime(0.05, audioCtx.currentTime + 0.005);
        g.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.06);

        o.connect(g); g.connect(audioCtx.destination);
        o.start();
        o.stop(audioCtx.currentTime + 0.07);
      }catch(e){}
    }

    // Only for real taps/clicks on interactive elements
    document.addEventListener("click", (e)=>{
      if(e.target.closest("button, a, summary, .tipClose, input, select")) clickSound();
    }, {passive:true});

    /**********************
     * TIPS (AUTO)
     **********************/
    let tipIdx = 0;
    const TIP_EVERY_MS = 32000;   // cada 32s
    const TIP_SHOW_MS  = 12000;   // visible 12s
    let tipInterval = null;
    let tipHideTO = null;

    function showTipAuto(){
      const tip = document.getElementById("tip");
      const t = TIPS[tipIdx % TIPS.length];
      tipIdx++;

      document.getElementById("tipText").textContent = t;
      document.getElementById("tipN").textContent = `Tip ${tipIdx} de ${TIPS.length}`;

      tip.style.display = "flex";

      clearTimeout(tipHideTO);
      tipHideTO = setTimeout(()=> tip.style.display="none", TIP_SHOW_MS);
    }

    function startTips(){
      setTimeout(showTipAuto, 6000);
      tipInterval = setInterval(showTipAuto, TIP_EVERY_MS);
    }

    document.getElementById("tipClose").addEventListener("click", ()=>{
      document.getElementById("tip").style.display="none";
    });

    /**********************
     * ✅ COMPATIBILITY (FIXED: ranges + modelos + no guessing)
     **********************/
    const COMPAT_TABLE = {
      Toyota: {
        "Corolla": [
          { from: 2000, to: 2007, low: "9006 (HB4)", high: "9005 (HB3)", note: "Varía por mercado/faro" },
          { from: 2008, to: 2013, low: "H11",         high: "9005 (HB3)", note: "Varía por versión" },
          { from: 2014, to: 2019, low: "H11",         high: "9005 (HB3)", note: "Confirmar si proyector" },
          { from: 2020, to: 2026, low: "H11 / LED",   high: "9005 / LED", note: "Algunas versiones LED OEM" }
        ],
        "Hilux": [
          { from: 2005, to: 2015, low: "H4",          high: "H4",          note: "Bifocal común en muchos mercados" },
          { from: 2016, to: 2026, low: "H11",         high: "9005 (HB3)",  note: "Varía por versión/mercado" }
        ],
        "4Runner": [
          { from: 2003, to: 2009, low: "9006 (HB4)",  high: "9005 (HB3)",  note: "Varía por faro" },
          { from: 2010, to: 2013, low: "H11",         high: "9005 (HB3)",  note: "Confirmar" },
          { from: 2014, to: 2020, low: "H11",         high: "9005 (HB3)",  note: "Confirmar si proyector" },
          { from: 2021, to: 2026, low: "H11 / LED",   high: "9005 / LED",  note: "Algunas versiones LED OEM" }
        ],
        "Land Cruiser": [
          { from: 1998, to: 2007, low: "9006 (HB4)",  high: "9005 (HB3)",  note: "100 series (varía)" },
          { from: 2008, to: 2021, low: "H11",         high: "9005 (HB3)",  note: "200 series (varía)" },
          { from: 2022, to: 2026, low: "H11 / LED",   high: "H11 / LED",   note: "Muchas versiones LED OEM" }
        ]
      },
      Ford: {
        "Fiesta": [
          { from: 2003, to: 2013, low: "H4",          high: "H4",          note: "Bifocal común (varía)" },
          { from: 2014, to: 2019, low: "H11",         high: "9005 (HB3)",  note: "Varía por faro/mercado" },
          { from: 2020, to: 2026, low: "H11 / LED",   high: "9005 / LED",  note: "Depende de versión" }
        ],
        "Ranger": [
          { from: 2000, to: 2011, low: "H4",          high: "H4",          note: "Varía por mercado" },
          { from: 2012, to: 2018, low: "H4 / H11",    high: "H4 / 9005",   note: "Varía por mercado/faro" },
          { from: 2019, to: 2026, low: "H11",         high: "9005 (HB3)",  note: "Varía por faro" }
        ],
        "Explorer": [
          { from: 2002, to: 2005, low: "9006 (HB4)",  high: "9005 (HB3)",  note: "Confirmar" },
          { from: 2006, to: 2019, low: "H11",         high: "9005 (HB3)",  note: "Varía por versión" },
          { from: 2020, to: 2026, low: "H11 / LED",   high: "9005 / LED",  note: "Muchas versiones LED OEM" }
        ]
      },
      Chevrolet: {
        "Corsa": [
          { from: 2000, to: 2026, low: "H4",          high: "H4",          note: "Bifocal común (varía)" }
        ],
        "Aveo": [
          { from: 2004, to: 2017, low: "H4",          high: "H4",          note: "Aveo clásico (varía por año)" },
          { from: 2018, to: 2026, low: "H11 / H7",    high: "9005 / H1",   note: "Depende de generación/mercado" }
        ],
        "Spark": [
          { from: 2006, to: 2015, low: "H4",          high: "H4",          note: "Muy común" },
          { from: 2016, to: 2026, low: "H4 / H7",     high: "H4 / H1",     note: "Varía por faro" }
        ]
      }
    };

    function fillYears(){
      const y = document.getElementById("cYear");
      const minY = 1998;
      const maxY = Math.max(2026, new Date().getFullYear() + 1);
      y.innerHTML =
        `<option value="">Año</option>` +
        Array.from({length: maxY-minY+1}, (_,i)=>minY+i)
          .map(v=>`<option value="${v}">${v}</option>`).join("");
    }

    function fillModels(brand){
      const m = document.getElementById("cModel");
      const models = COMPAT_TABLE[brand] ? Object.keys(COMPAT_TABLE[brand]) : [];
      m.innerHTML =
        `<option value="">Selecciona modelo</option>` +
        models.map(x=>`<option value="${x}">${x}</option>`).join("");
    }

    function findCompatRow(brand, model, year){
      const rows = COMPAT_TABLE?.[brand]?.[model];
      if(!rows) return null;
      return rows.find(r => year >= r.from && year <= r.to) || null;
    }

    function doCompat(){
      const b = document.getElementById("cBrand").value;
      const m = document.getElementById("cModel").value;
      const y = parseInt(document.getElementById("cYear").value,10);
      const out = document.getElementById("compatResult");

      if(!b || !m || !y){
        out.style.display="block";
        out.innerHTML = `⚠️ Completa <strong>marca, modelo y año</strong>.`;
        return;
      }

      const row = findCompatRow(b,m,y);

      if(!row){
        out.style.display="block";
        out.innerHTML = `
          ⚠️ <strong>${b} ${m} ${y}</strong><br>
          No tenemos un match verificado en la tabla para ese año.<br>
          <div class="tiny" style="margin-top:8px;color:#6b7280">
            Envíanos por WhatsApp una <b>foto del bombillo</b> o del <b>faro</b> para confirmar el socket (bajas/altas).
          </div>
        `;
        return;
      }

      const hasLedOem = (String(row.low).includes("LED") || String(row.high).includes("LED"));
      const rec = hasLedOem
        ? "Si tu faro es LED OEM, necesitamos foto para recomendar el kit correcto."
        : "Recomendación: R36 (balance) / R33 (máxima potencia) / R36T (dual).";

      out.style.display="block";
      out.innerHTML = `
        ✅ <strong>${b} ${m} ${y}</strong><br>
        • Luz baja: <strong>${row.low || "—"}</strong><br>
        • Luz alta: <strong>${row.high || "—"}</strong><br>
        • Nota: <strong>${row.note || "—"}</strong><br>
        • ${rec}
        <div class="tiny" style="margin-top:8px;color:#6b7280">
          Importante: puede variar por versión/mercado. Si difiere, mándanos foto del socket.
        </div>
      `;
    }

    /**********************
     * ADMIN MODAL + LOGIN
     **********************/
    const adminModal = document.getElementById("adminModal");
    const fabAdmin = document.getElementById("fabAdmin");
    const openAdmin = document.getElementById("openAdmin");
    const closeAdmin = document.getElementById("closeAdmin");
    const btnLogin = document.getElementById("btnLogin");
    const btnLogout = document.getElementById("btnLogout");

    function showModal(){
      adminModal.classList.add("show");
      adminModal.setAttribute("aria-hidden","false");
      document.body.style.overflow = "hidden";
    }
    function hideModal(){
      adminModal.classList.remove("show");
      adminModal.setAttribute("aria-hidden","true");
      document.body.style.overflow = "";
    }

    fabAdmin.addEventListener("click", showModal);
    openAdmin.addEventListener("click", showModal);
    closeAdmin.addEventListener("click", hideModal);

    adminModal.addEventListener("click", (e)=>{
      if(e.target === adminModal) hideModal();
    });

    function isLogged(){ return localStorage.getItem("brutalux_admin") === "1"; }
    function setLogged(v){ localStorage.setItem("brutalux_admin", v ? "1" : "0"); }

    function syncAdminUI(){
      const logged = isLogged();
      document.getElementById("adminArea").style.display = logged ? "block" : "none";
      btnLogout.style.display = logged ? "inline-block" : "none";
      btnLogin.style.display = logged ? "none" : "inline-block";

      if(logged){
        const st = getState();
        document.getElementById("rateInput").value = String(st.rate).replace(".", ",");
        document.getElementById("warrantyInput").value = st.warranty;
        document.getElementById("logoInput").value = st.logo;
        document.getElementById("heroBgInput").value = st.heroBg;

        fillInvoiceProductSelect();
        scheduleInvoicePreview();
      }
    }

    btnLogin.addEventListener("click", ()=>{
      const u = document.getElementById("adminUser").value.trim();
      const p = document.getElementById("adminPass").value.trim();
      if(u === ADMIN_USER && p === ADMIN_PASS){
        setLogged(true);
        syncAdminUI();
      } else {
        alert("Usuario o contraseña incorrectos.");
      }
    });

    btnLogout.addEventListener("click", ()=>{
      setLogged(false);
      syncAdminUI();
    });

    document.getElementById("btnSaveSettings").addEventListener("click", ()=>{
      const st = getState();
      const rateRaw = document.getElementById("rateInput").value.trim().replace(".", "").replace(",", ".");
      const rate = parseFloat(rateRaw);
      const warranty = document.getElementById("warrantyInput").value.trim() || DEFAULTS.warranty;
      const logo = document.getElementById("logoInput").value.trim() || DEFAULTS.logo;
      const heroBg = document.getElementById("heroBgInput").value.trim() || DEFAULTS.heroBg;

      if(!isFinite(rate) || rate <= 0){
        alert("Tasa inválida. Ej: 375,08");
        return;
      }

      setState({...st, rate, warranty, logo, heroBg});
      renderRate();
      renderCatalog();
      scheduleInvoicePreview();
      alert("Guardado (local).");
    });

    document.getElementById("btnResetSettings").addEventListener("click", ()=>{
      if(!confirm("¿Restaurar valores por defecto?")) return;
      setState({...DEFAULTS});
      renderRate();
      renderCatalog();
      syncAdminUI();
    });

    /**********************
     * INVOICE BUILDER
     **********************/
    function getInvoice(){
      const raw = localStorage.getItem("brutalux_invoice");
      if(!raw) return { items: [] };
      try { return JSON.parse(raw); } catch { return { items: [] }; }
    }
    function setInvoice(inv){
      localStorage.setItem("brutalux_invoice", JSON.stringify(inv));
    }

    let invPreviewTimer = null;
    function scheduleInvoicePreview(){
      clearTimeout(invPreviewTimer);
      invPreviewTimer = setTimeout(refreshInvoicePreview, 120);
    }

    let invoiceListenersMounted = false;

    function fillInvoiceProductSelect(){
      const sel = document.getElementById("invProduct");
      if(!sel) return;

      sel.innerHTML = PRODUCTS
        .map(p=>`<option value="${p.id}">${p.id} - ${p.name} ($${p.usd})</option>`)
        .join("");

      sel.onchange = () => {
        const p = PRODUCTS.find(x=>x.id===sel.value);
        if(p) document.getElementById("invPrice").value = p.usd;
        scheduleInvoicePreview();
      };

      const first = PRODUCTS[0];
      if(first) document.getElementById("invPrice").value = first.usd;
    }

    function addItem(){
      const inv = getInvoice();
      const sel = document.getElementById("invProduct");
      const id = sel?.value;
      const p = PRODUCTS.find(x=>x.id===id);
      if(!p){ alert("Producto inválido."); return; }

      const qty = parseInt(document.getElementById("invQty").value,10);
      if(!isFinite(qty) || qty<=0){ alert("Cantidad inválida."); return; }

      const price = parseFloat(document.getElementById("invPrice").value);
      if(!isFinite(price) || price<=0){ alert("Precio inválido."); return; }

      inv.items.push({ id: p.id, desc: `${p.name} (${p.id})`, qty, usd: price });
      setInvoice(inv);
      scheduleInvoicePreview();
    }

    function clearItems(){
      if(!confirm("¿Vaciar la factura?")) return;
      setInvoice({items:[]});
      scheduleInvoicePreview();
    }

    function removeItem(idx){
      const inv = getInvoice();
      if(idx<0 || idx>=inv.items.length) return;
      inv.items.splice(idx,1);
      setInvoice(inv);
      scheduleInvoicePreview();
    }

    function mountInvoiceListenersOnce(){
      if(invoiceListenersMounted) return;
      invoiceListenersMounted = true;

      document.getElementById("btnAddItem")?.addEventListener("click", addItem);
      document.getElementById("btnClearItems")?.addEventListener("click", clearItems);
      document.getElementById("btnRefreshInvoice")?.addEventListener("click", refreshInvoicePreview);

      document.getElementById("btnPrint")?.addEventListener("click", ()=>{
        refreshInvoicePreview();
        setTimeout(()=> window.print(), 80);
      });

      ["invClient","invId","invPhone","invAddr","invTax","invDiscount","invPrice","invQty"].forEach(id=>{
        const el = document.getElementById(id);
        if(el) el.addEventListener("input", scheduleInvoicePreview);
      });

      document.getElementById("invoicePreview")?.addEventListener("click", (e)=>{
        const btn = e.target.closest("[data-remove]");
        if(!btn) return;
        const idx = parseInt(btn.dataset.remove,10);
        if(isFinite(idx)) removeItem(idx);
      });
    }

    function refreshInvoicePreview(){
      const st = getState();
      const inv = getInvoice();

      const client = document.getElementById("invClient")?.value || "";
      const doc = document.getElementById("invId")?.value || "";
      const phone = document.getElementById("invPhone")?.value || "";
      const addr = document.getElementById("invAddr")?.value || "";

      const taxPct = parseFloat(document.getElementById("invTax")?.value || "0") || 0;
      const discount = parseFloat(document.getElementById("invDiscount")?.value || "0") || 0;

      const sub = inv.items.reduce((a,it)=> a + (it.qty * it.usd), 0);
      const tax = sub * (taxPct/100);
      const totalUsd = Math.max(0, (sub + tax - discount));
      const totalBs = totalUsd * st.rate;

      const now = new Date();
      const dateStr = now.toLocaleDateString("es-VE") + " " +
        now.toLocaleTimeString("es-VE", {hour:'2-digit', minute:'2-digit'});

      const rows = inv.items.map((it, idx)=>{
        const line = it.qty * it.usd;
        return `
          <tr>
            <td>${it.desc}</td>
            <td class="r">${it.qty}</td>
            <td class="r">€${fmtUsd(it.usd)}</td>
            <td class="r">€${fmtUsd(line)}</td>
            <td class="r"><button type="button" class="btnRemove" data-remove="${idx}">Quitar</button></td>
          </tr>
        `;
      }).join("");

      const pv = document.getElementById("invoicePreview");
      if(!pv) return;

      pv.innerHTML = `
        <div class="invHeaderBar">
          <div class="title">Factura / Nota de Venta</div>
          <div class="chip">Tasa BCV: ${fmtBs(st.rate)} Bs/EUR</div>
        </div>

        <div class="invTop">
          <div class="invBrand">
            <img src="${st.logo}" alt="logo">
            <div>
              <div class="t1">BRUTALUX</div>
              <div class="t2">Potentes y resistentes • Garantía ${st.warranty}</div>
              <div class="t2">WhatsApp: +58 412 6835635</div>
            </div>
          </div>
          <div class="invMeta">
            <b>Emisión</b>
            <div>${dateStr}</div>
            <div style="margin-top:6px"><b>Moneda:</b> USD (Ref. Bs)</div>
          </div>
        </div>

        <div class="invPad">
          <div class="invCards">
            <div class="invCard">
              <div class="h"><i class="fa-solid fa-user"></i> Datos del cliente</div>
              <div class="l"><b>Nombre:</b> ${client || "—"}</div>
              <div class="l"><b>Cédula/RIF:</b> ${doc || "—"}</div>
              <div class="l"><b>Teléfono:</b> ${phone || "—"}</div>
              <div class="l"><b>Dirección:</b> ${addr || "—"}</div>
            </div>

            <div class="invCard">
              <div class="h"><i class="fa-solid fa-receipt"></i> Resumen</div>
              <div class="l"><b>Subtotal:</b> ${BASE_SYMBOL}${fmtMoney(sub)}</div>
              <div class="l"><b>IVA (${taxPct}%):</b> ${BASE_SYMBOL}${fmtMoney(tax)}</div>
              <div class="l"><b>Descuento:</b> ${BASE_SYMBOL}${fmtMoney(discount)}</div>
              <div class="l" style="margin-top:8px"><b>Total USD:</b> ${BASE_SYMBOL}${fmtMoney(totalUsd)}</div>
              <div class="l"><b>Total Bs (ref.):</b> Bs ${fmtBs(totalBs)}</div>
            </div>
          </div>

          <table>
            <thead>
              <tr>
                <th>Descripción</th>
                <th class="r">Cant</th>
                <th class="r">Precio</th>
                <th class="r">Total</th>
                <th class="r">Acción</th>
              </tr>
            </thead>
            <tbody>
              ${rows || `<tr><td colspan="5" style="color:#64748b">Sin items. Agrega productos.</td></tr>`}
            </tbody>
          </table>
        </div>

        <div class="totals">
          <div class="boxT">
            <div class="k">Subtotal</div>
            <div class="v">$${fmtUsd(sub)}</div>
          </div>
          <div class="boxT">
            <div class="k">Impuestos / Descuento</div>
            <div class="v">$${fmtUsd(Math.max(0, tax - discount))}</div>
          </div>
          <div class="boxT primary">
            <div class="k">Total a pagar</div>
            <div class="v">$${fmtUsd(totalUsd)} <span style="font-size:12px;font-weight:900;color:#334155"> / Bs ${fmtBs(totalBs)}</span></div>
          </div>
        </div>

        <div class="stampSign">
          <div class="stampBox">
            <div class="t">Sello</div>
            <div class="hint">Coloca aquí el sello al imprimir.</div>
            <div class="stampLine"></div>
            <div class="stampSigLbl">Sello</div>
          </div>
          <div class="stampBox">
            <div class="t">Firma</div>
            <div class="hint">Firma y nombre del responsable.</div>
            <div class="stampLine"></div>
            <div class="stampSigLbl">Firma</div>
          </div>
        </div>

        <div class="invFoot">
          Esta impresión es una nota/recibo digital de referencia. Para facturación fiscal oficial se requiere sistema homologado e impresora fiscal (según normativa).
        </div>
      `;
    }

    function openAdminAndPreselect(productId){
      showModal();
      setTimeout(()=>{
        if(isLogged()){
          fillInvoiceProductSelect();
          const sel = document.getElementById("invProduct");
          if(sel){
            sel.value = productId;
            const p = PRODUCTS.find(x=>x.id===productId);
            if(p) document.getElementById("invPrice").value = p.usd;
          }
          scheduleInvoicePreview();
        }
      }, 60);
    }
    window.openAdminAndPreselect = openAdminAndPreselect;

    /**********************
     * INIT
     **********************/
    document.getElementById("yearNow").textContent = new Date().getFullYear();

    renderRate();
    renderCatalog();

    // ✅ Compat init fixed
    fillYears();
    document.getElementById("cBrand").addEventListener("change", (e)=>{
      const brand = e.target.value;
      const modelSel = document.getElementById("cModel");
      const yearSel = document.getElementById("cYear");
      const out = document.getElementById("compatResult");

      out.style.display = "none";
      out.innerHTML = "";

      if(!brand){
        modelSel.disabled = true;
        yearSel.disabled = true;
        modelSel.innerHTML = `<option value="">Primero marca</option>`;
        yearSel.value = "";
        return;
      }

      fillModels(brand);
      modelSel.disabled = false;
      yearSel.disabled = false;
    });
    document.getElementById("btnCompat").addEventListener("click", doCompat);

    mountInvoiceListenersOnce();
    syncAdminUI();
    scheduleInvoicePreview();
    startTips();
    loadRateFromJson();
  
  /**********************
 * CART / PEDIDO RAPIDO (FIXED)
 **********************/
const CART_KEY = "brutalux_cart";

function getCart(){
  try{
    const raw = localStorage.getItem(CART_KEY);
    if(!raw) return [];
    const arr = JSON.parse(raw);
    return Array.isArray(arr) ? arr : [];
  }catch{ return []; }
}
function setCart(items){
  localStorage.setItem(CART_KEY, JSON.stringify(items));
}
function cartCount(){
  return getCart().reduce((a,it)=>a+(it.qty||0),0);
}
function updateCartBadge(){
  const el = document.getElementById("cartCount");
  if(el) el.textContent = String(cartCount());
}

function addToCart(productId, qtyAdd=1){
  const p = PRODUCTS.find(x=>x.id===productId);
  if(!p) return;

  const cart = getCart();
  const idx = cart.findIndex(x=>x.id===productId);
  if(idx>=0) cart[idx].qty += qtyAdd;
  else cart.push({ id: p.id, name: p.name, usd: p.usd, qty: qtyAdd, modelLine: p.modelLine });

  setCart(cart);
  updateCartBadge();
}

function calcCart(){
  const st = getState();
  const cart = getCart();
  const subUsd = cart.reduce((a,it)=>a+(it.usd*it.qty),0);
  const subBs  = subUsd * st.rate;
  return { cart, subUsd, subBs, rate: st.rate };
}

function renderCart(){
  const wrap = document.getElementById("cartItems");
  if(!wrap) return;

  const st = getState();
  const cart = getCart();

  const subEur = cart.reduce((a,it)=> a + (Number(it.usd) * Number(it.qty)), 0); // it.usd = precio base (ahora EUR)
  const rate = Number(st.rate); // Bs por EUR
  const subBs = (isFinite(rate) && rate > 0) ? (subEur * rate) : 0;

  wrap.innerHTML = cart.length ? cart.map((it, idx)=>`
    <div class="cartItem">
      <div>
        <div class="t">${it.name}</div>
        <div class="m">${it.modelLine || it.id} • ${BASE_SYMBOL}${fmtMoney(it.usd)}</div>
      </div>

      <input class="cartQty" type="number" min="1" value="${it.qty}" data-qty="${idx}">
      <button class="btnRemove" type="button" data-del="${idx}">Quitar</button>
    </div>
  `).join("") : `<div class="tiny" style="color:#64748b">Tu carrito está vacío. Agrega productos del catálogo.</div>`;

  // Totales
  const subEl = document.getElementById("cartSubUsd");
  const bsEl  = document.getElementById("cartSubBs");
  const rateEl= document.getElementById("cartRate");

  if(subEl) subEl.textContent = `${BASE_SYMBOL}${fmtMoney(subEur)}`;
  if(bsEl)  bsEl.textContent  = `Bs ${fmtBs(subBs)}`;
  if(rateEl) rateEl.textContent = (isFinite(rate) && rate > 0) ? `${fmtBs(rate)} ${RATE_PAIR_LABEL}` : "—";

  // WhatsApp link
  const name = document.getElementById("cartName")?.value?.trim() || "";
  const car  = document.getElementById("cartCar")?.value?.trim() || "";
  const city = document.getElementById("cartCity")?.value?.trim() || "";
  const note = document.getElementById("cartNote")?.value?.trim() || "";

  const lines = cart.map(it=>{
    const lineTotal = Number(it.qty) * Number(it.usd);
    return `- ${it.qty} x ${it.name} (${it.id}) = ${BASE_SYMBOL}${fmtMoney(lineTotal)}`;
  }).join("\n");

  const msg =
`Hola BRUTALUX, quiero hacer un pedido.
Nombre: ${name || "—"}
Vehículo: ${car || "—"}
Ciudad/Estado: ${city || "—"}

Items:
${lines || "- (sin items)"}

Subtotal ${BASE_CCY}: ${BASE_SYMBOL}${fmtMoney(subEur)}
Referencia Bs: Bs ${fmtBs(subBs)}
Tasa: ${(isFinite(rate) && rate > 0) ? fmtBs(rate) + " " + RATE_PAIR_LABEL : "—"}

Observaciones: ${note || "—"}`;

  const a = document.getElementById("cartWhatsapp");
  if(a) a.href = `https://wa.me/${WHATSAPP}?text=${encodeURIComponent(msg)}`;
}

function showCart(){
  const m = document.getElementById("cartModal");
  if(!m) return;
  m.classList.add("show");
  m.setAttribute("aria-hidden","false");
  document.body.style.overflow = "hidden";
  renderCart();
}

function hideCart(){
  const m = document.getElementById("cartModal");
  if(!m) return;
  m.classList.remove("show");
  m.setAttribute("aria-hidden","true");
  document.body.style.overflow = "";
}

function mountCart(){
  document.getElementById("openCart")?.addEventListener("click", showCart);
  document.getElementById("closeCart")?.addEventListener("click", hideCart);

  document.getElementById("cartModal")?.addEventListener("click", (e)=>{
    if(e.target?.id === "cartModal") hideCart();
  });

  document.getElementById("cartClear")?.addEventListener("click", ()=>{
    if(!confirm("¿Vaciar carrito?")) return;
    setCart([]);
    updateCartBadge();
    renderCart();
  });

  document.getElementById("cartItems")?.addEventListener("input", (e)=>{
    const inp = e.target.closest("[data-qty]");
    if(!inp) return;
    const idx = parseInt(inp.dataset.qty,10);
    const qty = parseInt(inp.value,10);
    const cart = getCart();
    if(!Number.isFinite(idx) || !cart[idx]) return;
    cart[idx].qty = Math.max(1, Number.isFinite(qty) ? qty : 1);
    setCart(cart);
    updateCartBadge();
    renderCart();
  });

  document.getElementById("cartItems")?.addEventListener("click", (e)=>{
    const btn = e.target.closest("[data-del]");
    if(!btn) return;
    const idx = parseInt(btn.dataset.del,10);
    const cart = getCart();
    if(!Number.isFinite(idx) || !cart[idx]) return;
    cart.splice(idx,1);
    setCart(cart);
    updateCartBadge();
    renderCart();
  });

  ["cartName","cartCar","cartCity","cartNote"].forEach(id=>{
    document.getElementById(id)?.addEventListener("input", renderCart);
  });

  // Delegación: botones Agregar en catálogo
  document.getElementById("productCards")?.addEventListener("click", (e)=>{
    const b = e.target.closest("[data-addcart]");
    if(!b) return;
    addToCart(b.dataset.addcart, 1);
    showCart();
  });

  updateCartBadge();
}

if(document.readyState === "loading") document.addEventListener("DOMContentLoaded", mountCart);
else mountCart();
  function setState(next){
  localStorage.setItem("brutalux_state", JSON.stringify(next));
}
  async function loadRateFromJson(){
  try{
    const res = await fetch("./rate.json", { cache: "no-store" });
    if(!res.ok) return;

    const data = await res.json();
    const r = Number(data?.rate);

    if(!isFinite(r) || r <= 0) return;

    const st = getState();
    setState({ ...st, rate: r });

    renderRate();
    renderCatalog();
    scheduleInvoicePreview();
  }catch(e){
    // si falla, se queda con la tasa local por defecto
  }
}
  </script>
<!-- CART MODAL -->
<div class="modal" id="cartModal" aria-hidden="true">
  <div class="panel" style="width:min(880px,96vw)">
    <div class="panelHead">
      <h3 class="orbitron">Carrito / Pedido rápido</h3>
      <button class="close orbitron" id="closeCart"><i class="fa-solid fa-xmark"></i> Cerrar</button>
    </div>

    <div class="panelBody">
      <div class="box">
        <div class="row">
          <div>
            <label>Nombre</label>
            <input id="cartName" placeholder="Tu nombre">
          </div>
          <div>
            <label>Vehículo (opcional)</label>
            <input id="cartCar" placeholder="Ej: Corolla 2014">
          </div>
        </div>

        <div style="margin-top:10px" class="row">
          <div>
            <label>Ciudad/Estado (opcional)</label>
            <input id="cartCity" placeholder="Ej: Caracas / Miranda">
          </div>
          <div>
            <label>Observaciones</label>
            <input id="cartNote" placeholder="Ej: baja/alta, envío, dual color...">
          </div>
        </div>
      </div>

      <div class="box" style="margin-top:12px">
        <h4>Items</h4>
        <div id="cartItems" class="cartItems"></div>

        <div class="cartTotals">
          <div class="pill">Subtotal EUR: <b id="cartSubUsd">€0.00</b></div>
          <div class="pill">Ref. Bs: <b id="cartSubBs">Bs 0,00</b></div>
          <div class="pill">Tasa: <b id="cartRate">—</b></div>
        </div>

        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px">
          <button class="btnWide orbitron" id="cartClear"><i class="fa-solid fa-trash"></i> Vaciar</button>
          <a class="btnWide green orbitron" id="cartWhatsapp" target="_blank" rel="noopener">
            <i class="fa-brands fa-whatsapp"></i> Enviar pedido por WhatsApp
          </a>
        </div>

        <p class="mut" style="margin-top:10px">
          El pedido se envía por WhatsApp con productos, cantidades y total. Sin backend.
        </p>
      </div>
    </div>
  </div>
</div>
</body>
</html>




